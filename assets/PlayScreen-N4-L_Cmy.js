import{u as Bn}from"./eventStore-DFZ9vzYp.js";import{d as Ln,o as Vn,c as _n,b as Wn,w as Gn,a as Ce,r as Un,f as Zn}from"./index-ChLkib44.js";function Kt(){}function ve(e,t){for(const n in t)e[n]=t[n];return e}function en(e){return e()}function Ie(){return Object.create(null)}function Et(e){e.forEach(en)}function $n(e){return typeof e=="function"}function de(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ae(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function B(e,t){e.appendChild(t)}function ht(e,t,n){e.insertBefore(t,n||null)}function ct(e){e.parentNode.removeChild(e)}function Ht(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function j(e){return document.createElement(e)}function Yt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function vt(e){return document.createTextNode(e)}function et(){return vt(" ")}function xt(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function T(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Pt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function H(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function wt(e,t,n){e.classList[n?"add":"remove"](t)}let Bt;function kt(e){Bt=e}function Jt(){if(!Bt)throw new Error("Function called outside component initialization");return Bt}function nn(e){Jt().$$.on_mount.push(e)}function on(e){Jt().$$.on_destroy.push(e)}function Kn(){const e=Jt();return(t,n,{cancelable:i=!1}={})=>{const o=e.$$.callbacks[t];if(o){const s=function(r,a,{bubbles:l=!1,cancelable:u=!1}={}){const c=document.createEvent("CustomEvent");return c.initCustomEvent(r,l,u,a),c}(t,n,{cancelable:i});return o.slice().forEach(r=>{r.call(e,s)}),!s.defaultPrevented}return!0}}const Dt=[],ft=[],Zt=[],oe=[],Yn=Promise.resolve();let re=!1;function se(e){Zt.push(e)}const Xt=new Set;let _t=0;function rn(){const e=Bt;do{for(;_t<Dt.length;){const t=Dt[_t];_t++,kt(t),Pn(t.$$)}for(kt(null),Dt.length=0,_t=0;ft.length;)ft.pop()();for(let t=0;t<Zt.length;t+=1){const n=Zt[t];Xt.has(n)||(Xt.add(n),n())}Zt.length=0}while(Dt.length);for(;oe.length;)oe.pop()();re=!1,Xt.clear(),kt(e)}function Pn(e){if(e.fragment!==null){e.update(),Et(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(se)}}const $t=new Set;let mt;function sn(){mt={r:0,c:[],p:mt}}function an(){mt.r||Et(mt.c),mt=mt.p}function dt(e,t){e&&e.i&&($t.delete(e),e.i(t))}function Nt(e,t,n,i){if(e&&e.o){if($t.has(e))return;$t.add(e),mt.c.push(()=>{$t.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function ln(e){e&&e.c()}function he(e,t,n,i){const{fragment:o,on_mount:s,on_destroy:r,after_update:a}=e.$$;o&&o.m(t,n),i||se(()=>{const l=s.map(en).filter($n);r?r.push(...l):Et(l),e.$$.on_mount=[]}),a.forEach(se)}function pe(e,t){const n=e.$$;n.fragment!==null&&(Et(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Qn(e,t){e.$$.dirty[0]===-1&&(Dt.push(e),re||(re=!0,Yn.then(rn)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fe(e,t,n,i,o,s,r,a=[-1]){const l=Bt;kt(e);const u=e.$$={fragment:null,ctx:null,props:s,update:Kt,not_equal:o,bound:Ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Ie(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};r&&r(u.root);let c=!1;if(u.ctx=n?n(e,t.props||{},(d,h,...v)=>{const f=v.length?v[0]:h;return u.ctx&&o(u.ctx[d],u.ctx[d]=f)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](f),c&&Qn(e,d)),h}):[],u.update(),c=!0,Et(u.before_update),u.fragment=!!i&&i(u.ctx),t.target){if(t.hydrate){const d=function(h){return Array.from(h.childNodes)}(t.target);u.fragment&&u.fragment.l(d),d.forEach(ct)}else u.fragment&&u.fragment.c();t.intro&&dt(e.$$.fragment),he(e,t.target,t.anchor,t.customElement),rn()}kt(l)}class ge{$destroy(){pe(this,1),this.$destroy=Kt}$on(t,n){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){var n;this.$$set&&(n=t,Object.keys(n).length!==0)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var q;function zn(e){return e.nodeType===e.ELEMENT_NODE}(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(q||(q={}));var cn=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var n;if(!t)return-1;var i=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return i??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var n=this,i=this.getId(t);this.idNodeMap.delete(i),t.childNodes&&t.childNodes.forEach(function(o){return n.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,n){var i=n.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,n)},e.prototype.replace=function(t,n){var i=this.getNode(t);if(i){var o=this.nodeMetaMap.get(i);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Jn(){return new cn}var be=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function Hn(e,t){t===void 0&&(t={});var n=1,i=1;function o(A){var g=A.match(/\n/g);g&&(n+=g.length);var D=A.lastIndexOf(`
`);i=D===-1?i+A.length:A.length-D}function s(){var A={line:n,column:i};return function(g){return g.position=new r(A),v(),g}}var r=function(A){this.start=A,this.end={line:n,column:i},this.source=t.source};r.prototype.content=e;var a=[];function l(A){var g=new Error("".concat(t.source||"",":").concat(n,":").concat(i,": ").concat(A));if(g.reason=A,g.filename=t.source,g.line=n,g.column=i,g.source=e,!t.silent)throw g;a.push(g)}function u(){return h(/^{\s*/)}function c(){return h(/^}/)}function d(){var A,g=[];for(v(),f(g);e.length&&e.charAt(0)!=="}"&&(A=C()||x());)A!==!1&&(g.push(A),f(g));return g}function h(A){var g=A.exec(e);if(g){var D=g[0];return o(D),e=e.slice(D.length),g}}function v(){h(/^\s*/)}function f(A){var g;for(A===void 0&&(A=[]);g=p();)g!==!1&&A.push(g),g=p();return A}function p(){var A=s();if(e.charAt(0)==="/"&&e.charAt(1)==="*"){for(var g=2;e.charAt(g)!==""&&(e.charAt(g)!=="*"||e.charAt(g+1)!=="/");)++g;if(g+=2,e.charAt(g-1)==="")return l("End of comment missing");var D=e.slice(2,g-2);return i+=2,o(D),e=e.slice(g),i+=2,A({type:"comment",comment:D})}}function m(){var A=h(/^([^{]+)/);if(A)return ut(A[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(g){return g.replace(/,/g,"â€Œ")}).split(/\s*(?![^(]*\)),\s*/).map(function(g){return g.replace(/\u200C/g,",")})}function y(){var A=s(),g=h(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(g){var D=ut(g[0]);if(!h(/^:\s*/))return l("property missing ':'");var S=h(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),P=A({type:"declaration",property:D.replace(be,""),value:S?ut(S[0]).replace(be,""):""});return h(/^[;\s]*/),P}}function I(){var A,g=[];if(!u())return l("missing '{'");for(f(g);A=y();)A!==!1&&(g.push(A),f(g)),A=y();return c()?g:l("missing '}'")}function N(){for(var A,g=[],D=s();A=h(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)g.push(A[1]),h(/^,\s*/);if(g.length)return D({type:"keyframe",values:g,declarations:I()})}var E,L=U("import"),V=U("charset"),$=U("namespace");function U(A){var g=new RegExp("^@"+A+"\\s*([^;]+);");return function(){var D=s(),S=h(g);if(S){var P={type:A};return P[A]=S[1].trim(),D(P)}}}function C(){if(e[0]==="@")return function(){var A=s(),g=h(/^@([-\w]+)?keyframes\s*/);if(g){var D=g[1];if(!(g=h(/^([-\w]+)\s*/)))return l("@keyframes missing name");var S,P=g[1];if(!u())return l("@keyframes missing '{'");for(var _=f();S=N();)_.push(S),_=_.concat(f());return c()?A({type:"keyframes",name:P,vendor:D,keyframes:_}):l("@keyframes missing '}'")}}()||function(){var A=s(),g=h(/^@media *([^{]+)/);if(g){var D=ut(g[1]);if(!u())return l("@media missing '{'");var S=f().concat(d());return c()?A({type:"media",media:D,rules:S}):l("@media missing '}'")}}()||function(){var A=s(),g=h(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(g)return A({type:"custom-media",name:ut(g[1]),media:ut(g[2])})}()||function(){var A=s(),g=h(/^@supports *([^{]+)/);if(g){var D=ut(g[1]);if(!u())return l("@supports missing '{'");var S=f().concat(d());return c()?A({type:"supports",supports:D,rules:S}):l("@supports missing '}'")}}()||L()||V()||$()||function(){var A=s(),g=h(/^@([-\w]+)?document *([^{]+)/);if(g){var D=ut(g[1]),S=ut(g[2]);if(!u())return l("@document missing '{'");var P=f().concat(d());return c()?A({type:"document",document:S,vendor:D,rules:P}):l("@document missing '}'")}}()||function(){var A=s();if(h(/^@page */)){var g=m()||[];if(!u())return l("@page missing '{'");for(var D,S=f();D=y();)S.push(D),S=S.concat(f());return c()?A({type:"page",selectors:g,declarations:S}):l("@page missing '}'")}}()||function(){var A=s();if(h(/^@host\s*/)){if(!u())return l("@host missing '{'");var g=f().concat(d());return c()?A({type:"host",rules:g}):l("@host missing '}'")}}()||function(){var A=s();if(h(/^@font-face\s*/)){if(!u())return l("@font-face missing '{'");for(var g,D=f();g=y();)D.push(g),D=D.concat(f());return c()?A({type:"font-face",declarations:D}):l("@font-face missing '}'")}}()}function x(){var A=s(),g=m();return g?(f(),A({type:"rule",selectors:g,declarations:I()})):l("selector missing")}return ae((E=d(),{type:"stylesheet",stylesheet:{source:t.source,rules:E,parsingErrors:a}}))}function ut(e){return e?e.replace(/^\s+|\s+$/g,""):""}function ae(e,t){for(var n=e&&typeof e.type=="string",i=n?e:t,o=0,s=Object.keys(e);o<s.length;o++){var r=e[s[o]];Array.isArray(r)?r.forEach(function(a){ae(a,i)}):r&&typeof r=="object"&&ae(r,i)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var we={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"},un=/([^\\]):hover/,Xn=new RegExp(un.source,"g");function Ne(e,t){var n=t==null?void 0:t.stylesWithHoverClass.get(e);if(n)return n;var i=Hn(e,{silent:!0});if(!i.stylesheet)return e;var o=[];if(i.stylesheet.rules.forEach(function(a){"selectors"in a&&(a.selectors||[]).forEach(function(l){un.test(l)&&o.push(l)})}),o.length===0)return e;var s=new RegExp(o.filter(function(a,l){return o.indexOf(a)===l}).sort(function(a,l){return l.length-a.length}).map(function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}).join("|"),"g"),r=e.replace(s,function(a){var l=a.replace(Xn,"$1.\\:hover");return"".concat(a,", ").concat(l)});return t==null||t.stylesWithHoverClass.set(e,r),r}function Ee(){return{stylesWithHoverClass:new Map}}function jn(e,t){var n=t.doc,i=t.hackCss,o=t.cache;switch(e.type){case q.Document:return n.implementation.createDocument(null,"",null);case q.DocumentType:return n.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case q.Element:var s,r=function(I){var N=we[I.tagName]?we[I.tagName]:I.tagName;return N==="link"&&I.attributes._cssText&&(N="style"),N}(e);s=e.isSVG?n.createElementNS("http://www.w3.org/2000/svg",r):n.createElement(r);var a={};for(var l in e.attributes)if(Object.prototype.hasOwnProperty.call(e.attributes,l)){var u=e.attributes[l];if(r!=="option"||l!=="selected"||u!==!1)if(u===!0&&(u=""),l.startsWith("rr_"))a[l]=u;else{var c=r==="textarea"&&l==="value",d=r==="style"&&l==="_cssText";if(d&&i&&typeof u=="string"&&(u=Ne(u,o)),!c&&!d||typeof u!="string")try{if(e.isSVG&&l==="xlink:href")s.setAttributeNS("http://www.w3.org/1999/xlink",l,u.toString());else if(l==="onload"||l==="onclick"||l.substring(0,7)==="onmouse")s.setAttribute("_"+l,u.toString());else{if(r==="meta"&&e.attributes["http-equiv"]==="Content-Security-Policy"&&l==="content"){s.setAttribute("csp-content",u.toString());continue}r==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||r==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")||(r==="img"&&e.attributes.srcset&&e.attributes.rr_dataURL?s.setAttribute("rrweb-original-srcset",e.attributes.srcset):s.setAttribute(l,u.toString()))}}catch{}else{for(var h=n.createTextNode(u),v=0,f=Array.from(s.childNodes);v<f.length;v++){var p=f[v];p.nodeType===s.TEXT_NODE&&s.removeChild(p)}s.appendChild(h)}}}var m=function(I){var N=a[I];if(r==="canvas"&&I==="rr_dataURL"){var E=document.createElement("img");E.onload=function(){var V=s.getContext("2d");V&&V.drawImage(E,0,0,E.width,E.height)},E.src=N.toString(),s.RRNodeType&&(s.rr_dataURL=N.toString())}else if(r==="img"&&I==="rr_dataURL"){var L=s;L.currentSrc.startsWith("data:")||(L.setAttribute("rrweb-original-src",e.attributes.src),L.src=N.toString())}if(I==="rr_width")s.style.width=N.toString();else if(I==="rr_height")s.style.height=N.toString();else if(I==="rr_mediaCurrentTime"&&typeof N=="number")s.currentTime=N;else if(I==="rr_mediaState")switch(N){case"played":s.play().catch(function(V){return console.warn("media playback error",V)});break;case"paused":s.pause()}};for(var y in a)m(y);if(e.isShadowHost)if(s.shadowRoot)for(;s.shadowRoot.firstChild;)s.shadowRoot.removeChild(s.shadowRoot.firstChild);else s.attachShadow({mode:"open"});return s;case q.Text:return n.createTextNode(e.isStyle&&i?Ne(e.textContent,o):e.textContent);case q.CDATA:return n.createCDATASection(e.textContent);case q.Comment:return n.createComment(e.textContent);default:return null}}function Ft(e,t){var n=t.doc,i=t.mirror,o=t.skipChild,s=o!==void 0&&o,r=t.hackCss,a=r===void 0||r,l=t.afterAppend,u=t.cache,c=jn(e,{doc:n,hackCss:a,cache:u});if(!c)return null;if(e.rootId&&i.getNode(e.rootId)!==n&&i.replace(e.rootId,n),e.type===q.Document&&(n.close(),n.open(),e.compatMode==="BackCompat"&&e.childNodes&&e.childNodes[0].type!==q.DocumentType&&(e.childNodes[0].type===q.Element&&"xmlns"in e.childNodes[0].attributes&&e.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),c=n),i.add(c,e),(e.type===q.Document||e.type===q.Element)&&!s)for(var d=0,h=e.childNodes;d<h.length;d++){var v=h[d],f=Ft(v,{doc:n,mirror:i,skipChild:!1,hackCss:a,afterAppend:l,cache:u});f?(v.isShadow&&zn(c)&&c.shadowRoot?c.shadowRoot.appendChild(f):c.appendChild(f),l&&l(f,v.id)):console.warn("Failed to rebuild",v)}return c}function qn(e,t){var n=t.doc,i=t.onVisit,o=t.hackCss,s=o===void 0||o,r=t.afterAppend,a=t.cache,l=t.mirror,u=l===void 0?new cn:l,c=Ft(e,{doc:n,mirror:u,skipChild:!1,hackCss:s,afterAppend:r,cache:a});return function(d,h){for(var v=0,f=d.getIds();v<f.length;v++){var p=f[v];d.has(p)&&h(d.getNode(p))}}(u,function(d){i&&i(d),function(h,v){var f=v.getMeta(h);if((f==null?void 0:f.type)===q.Element){var p=h;for(var m in f.attributes)if(Object.prototype.hasOwnProperty.call(f.attributes,m)&&m.startsWith("rr_")){var y=f.attributes[m];m==="rr_scrollLeft"&&(p.scrollLeft=y),m==="rr_scrollTop"&&(p.scrollTop=y)}}}(d,u)}),c}const It=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Se={map:{},getId:()=>(console.error(It),-1),getNode:()=>(console.error(It),null),removeNodeFromMap(){console.error(It)},has:()=>(console.error(It),!1),reset(){console.error(It)}};function ti(e){const t={},n=(o,s)=>{const r={value:o,parent:s,children:[]};return t[o.node.id]=r,r},i=[];for(const o of e){const{nextId:s,parentId:r}=o;if(s&&s in t){const a=t[s];if(a.parent){const l=a.parent.children.indexOf(a);a.parent.children.splice(l,0,n(o,a.parent))}else{const l=i.indexOf(a);i.splice(l,0,n(o,null))}}else if(r in t){const a=t[r];a.children.push(n(o,a))}else i.push(n(o,null))}return i}function dn(e,t){t(e.value);for(let n=e.children.length-1;n>=0;n--)dn(e.children[n],t)}function jt(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function hn(e,t){var n,i;const o=(i=(n=e.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||i===void 0?void 0:i.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const s=o.getBoundingClientRect(),r=hn(o,t),a=s.height/o.clientHeight;return{x:s.x*r.relativeScale+r.x,y:s.y*r.relativeScale+r.y,relativeScale:a,absoluteScale:r.absoluteScale*a}}function Wt(e){return!!(e!=null&&e.shadowRoot)}function Mt(e,t){const n=e[t[0]];return t.length===1?n:Mt(n.cssRules[t[1]].cssRules,t.slice(2))}function Te(e){const t=[...e],n=t.pop();return{positions:t,index:n}}typeof window<"u"&&window.Proxy&&window.Reflect&&(Se=new Proxy(Se,{get:(e,t,n)=>(t==="map"&&console.error(It),Reflect.get(e,t,n))}));class ei{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var n;return(n=this.styleIDMap.get(t))!==null&&n!==void 0?n:-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let i;return i=n===void 0?this.id++:n,this.styleIDMap.set(t,i),this.idStyleMap.set(i,t),i}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var K=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(K||{}),O=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(O||{}),tt=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(tt||{}),Qt=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Qt||{}),G=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e.Destroy="destroy",e))(G||{});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function yt(e,t,n,i){return new(n||(n=Promise))(function(o,s){function r(u){try{l(i.next(u))}catch(c){s(c)}}function a(u){try{l(i.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?o(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(r,a)}l((i=i.apply(e,[])).next())})}for(var De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rt=typeof Uint8Array>"u"?[]:new Uint8Array(256),Gt=0;Gt<De.length;Gt++)Rt[De.charCodeAt(Gt)]=Gt;var pn=null;try{var ni=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof require=="function"&&require("worker_threads");pn=ni.Worker}catch{}function ii(e,t,n){var i=t===void 0?null:t,o=function(a,l){return Buffer.from(a,"base64").toString(l?"utf16":"utf8")}(e,n!==void 0&&n),s=o.indexOf(`
`,10)+1,r=o.substring(s)+(i?"//# sourceMappingURL="+i:"");return function(a){return new pn(r,Object.assign({},a,{eval:!0}))}}var Me,Re,xe,k,oi=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";Me="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",Re=null,xe=!1,oi&&ii(Me,Re,xe),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(k||(k={}));var ri=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var n;if(!t)return-1;var i=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return i??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var n=this,i=this.getId(t);this.idNodeMap.delete(i),t.childNodes&&t.childNodes.forEach(function(o){return n.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,n){var i=n.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,n)},e.prototype.replace=function(t,n){var i=this.getNode(t);if(i){var o=this.nodeMetaMap.get(i);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function ke(e){const t=[];for(const n in e){const i=e[n];if(typeof i!="string")continue;const o=ci(n);t.push(`${o}: ${i};`)}return t.join(" ")}const si=/-([a-z])/g,ai=/^--[a-zA-Z0-9-]+$/,qt=e=>ai.test(e)?e:e.replace(si,(t,n)=>n?n.toUpperCase():""),li=/\B([A-Z])/g,ci=e=>e.replace(li,"-$1").toLowerCase();class rt{constructor(...t){this.childNodes=[],this.parentElement=null,this.parentNode=null,this.ELEMENT_NODE=z.ELEMENT_NODE,this.TEXT_NODE=z.TEXT_NODE}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){const t=this.parentNode;if(!t)return null;const n=t.childNodes,i=n.indexOf(this);return n[i+1]||null}contains(t){if(t===this)return!0;for(const n of this.childNodes)if(n.contains(t))return!0;return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,n){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function fn(e){return class extends e{constructor(t,n,i){super(),this.nodeType=z.DOCUMENT_TYPE_NODE,this.RRNodeType=k.DocumentType,this.textContent=null,this.name=t,this.publicId=n,this.systemId=i,this.nodeName=t}toString(){return"RRDocumentType"}}}function gn(e){return class extends e{constructor(t){super(),this.nodeType=z.ELEMENT_NODE,this.RRNodeType=k.Element,this.attributes={},this.shadowRoot=null,this.tagName=t.toUpperCase(),this.nodeName=t.toUpperCase()}get textContent(){let t="";return this.childNodes.forEach(n=>t+=n.textContent),t}set textContent(t){this.childNodes=[this.ownerDocument.createTextNode(t)]}get classList(){return new ui(this.attributes.class,t=>{this.attributes.class=t})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const t=this.attributes.style?function(i){const o={},s=/:(.+)/;return i.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach(function(r){if(r){const a=r.split(s);a.length>1&&(o[qt(a[0].trim())]=a[1].trim())}}),o}(this.attributes.style):{},n=/\B([A-Z])/g;return t.setProperty=(i,o,s)=>{if(n.test(i))return;const r=qt(i);o?t[r]=o:delete t[r],s==="important"&&(t[r]+=" !important"),this.attributes.style=ke(t)},t.removeProperty=i=>{if(n.test(i))return"";const o=qt(i),s=t[o]||"";return delete t[o],this.attributes.style=ke(t),s},t}getAttribute(t){return this.attributes[t]||null}setAttribute(t,n){this.attributes[t]=n}setAttributeNS(t,n,i){this.setAttribute(n,i)}removeAttribute(t){delete this.attributes[t]}appendChild(t){return this.childNodes.push(t),t.parentNode=this,t.parentElement=this,t}insertBefore(t,n){if(n===null)return this.appendChild(t);const i=this.childNodes.indexOf(n);if(i==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(i,0,t),t.parentElement=this,t.parentNode=this,t}removeChild(t){const n=this.childNodes.indexOf(t);if(n===-1)throw new Error("Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(n,1),t.parentElement=null,t.parentNode=null,t}attachShadow(t){const n=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=n,n}dispatchEvent(t){return!0}toString(){let t="";for(const n in this.attributes)t+=`${n}="${this.attributes[n]}" `;return`${this.tagName} ${t}`}}}function mn(e){return class extends e{constructor(t){super(),this.nodeType=z.TEXT_NODE,this.nodeName="#text",this.RRNodeType=k.Text,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function yn(e){return class extends e{constructor(t){super(),this.nodeType=z.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=k.Comment,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function Cn(e){return class extends e{constructor(t){super(),this.nodeName="#cdata-section",this.nodeType=z.CDATA_SECTION_NODE,this.RRNodeType=k.CDATA,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class ui{constructor(t,n){if(this.classes=[],this.add=(...i)=>{for(const o of i){const s=String(o);this.classes.indexOf(s)>=0||this.classes.push(s)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...i)=>{this.classes=this.classes.filter(o=>i.indexOf(o)===-1),this.onChange&&this.onChange(this.classes.join(" "))},t){const i=t.trim().split(/\s+/);this.classes.push(...i)}this.onChange=n}}var z;(function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"})(z||(z={}));const le={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},di={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function lt(e,t,n,i){const o=e.childNodes,s=t.childNodes;i=i||t.mirror||t.ownerDocument.mirror,(o.length>0||s.length>0)&&Fe(Array.from(o),s,e,n,i);let r=null,a=null;switch(t.RRNodeType){case k.Document:a=t.scrollData;break;case k.Element:{const l=e,u=t;switch(function(c,d,h){const v=c.attributes,f=d.attributes;for(const p in f){const m=f[p],y=h.getMeta(d);if(y&&"isSVG"in y&&y.isSVG&&le[p])c.setAttributeNS(le[p],p,m);else if(d.tagName==="CANVAS"&&p==="rr_dataURL"){const I=document.createElement("img");I.src=m,I.onload=()=>{const N=c.getContext("2d");N&&N.drawImage(I,0,0,I.width,I.height)}}else c.setAttribute(p,m)}for(const{name:p}of Array.from(v))p in f||c.removeAttribute(p);d.scrollLeft&&(c.scrollLeft=d.scrollLeft),d.scrollTop&&(c.scrollTop=d.scrollTop)}(l,u,i),a=u.scrollData,r=u.inputData,u.tagName){case"AUDIO":case"VIDEO":{const c=e,d=u;d.paused!==void 0&&(d.paused?c.pause():c.play()),d.muted!==void 0&&(c.muted=d.muted),d.volume!==void 0&&(c.volume=d.volume),d.currentTime!==void 0&&(c.currentTime=d.currentTime),d.playbackRate!==void 0&&(c.playbackRate=d.playbackRate);break}case"CANVAS":{const c=t;if(c.rr_dataURL!==null){const d=document.createElement("img");d.onload=()=>{const h=l.getContext("2d");h&&h.drawImage(d,0,0,d.width,d.height)},d.src=c.rr_dataURL}c.canvasMutations.forEach(d=>n.applyCanvas(d.event,d.mutation,e))}break;case"STYLE":{const c=l.sheet;c&&t.rules.forEach(d=>n.applyStyleSheetMutation(d,c))}}if(u.shadowRoot){l.shadowRoot||l.attachShadow({mode:"open"});const c=l.shadowRoot.childNodes,d=u.shadowRoot.childNodes;(c.length>0||d.length>0)&&Fe(Array.from(c),d,l.shadowRoot,n,i)}break}case k.Text:case k.Comment:case k.CDATA:e.textContent!==t.data&&(e.textContent=t.data)}if(a&&n.applyScroll(a,!0),r&&n.applyInput(r),t.nodeName==="IFRAME"){const l=e.contentDocument,u=t;if(l){const c=i.getMeta(u.contentDocument);c&&n.mirror.add(l,Object.assign({},c)),lt(l,u.contentDocument,n,i)}}}function Fe(e,t,n,i,o){var s;let r,a,l=0,u=e.length-1,c=0,d=t.length-1,h=e[l],v=e[u],f=t[c],p=t[d];for(;l<=u&&c<=d;){const m=i.mirror.getId(h),y=i.mirror.getId(v),I=o.getId(f),N=o.getId(p);if(h===void 0)h=e[++l];else if(v===void 0)v=e[--u];else if(m!==-1&&m===I)lt(h,f,i,o),h=e[++l],f=t[++c];else if(y!==-1&&y===N)lt(v,p,i,o),v=e[--u],p=t[--d];else if(m!==-1&&m===N)n.insertBefore(h,v.nextSibling),lt(h,p,i,o),h=e[++l],p=t[--d];else if(y!==-1&&y===I)n.insertBefore(v,h),lt(v,f,i,o),v=e[--u],f=t[++c];else{if(!r){r={};for(let E=l;E<=u;E++){const L=e[E];L&&i.mirror.hasNode(L)&&(r[i.mirror.getId(L)]=E)}}if(a=r[o.getId(f)],a){const E=e[a];n.insertBefore(E,h),lt(E,f,i,o),e[a]=void 0}else{const E=ce(f,i.mirror,o);n.nodeName==="#document"&&((s=i.mirror.getMeta(E))===null||s===void 0?void 0:s.type)===k.Element&&n.documentElement&&(n.removeChild(n.documentElement),e[l]=void 0,h=void 0),n.insertBefore(E,h||null),lt(E,f,i,o)}f=t[++c]}}if(l>u){const m=t[d+1];let y=null;for(m&&n.childNodes.forEach(I=>{i.mirror.getId(I)===o.getId(m)&&(y=I)});c<=d;++c){const I=ce(t[c],i.mirror,o);n.insertBefore(I,y),lt(I,t[c],i,o)}}else if(c>d)for(;l<=u;l++){const m=e[l];m&&(n.removeChild(m),i.mirror.removeNodeFromMap(m))}}function ce(e,t,n){const i=n.getId(e),o=n.getMeta(e);let s=null;if(i>-1&&(s=t.getNode(i)),s!==null)return s;switch(e.RRNodeType){case k.Document:s=new Document;break;case k.DocumentType:s=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case k.Element:{let r=e.tagName.toLowerCase();r=di[r]||r,s=o&&"isSVG"in o&&(o!=null&&o.isSVG)?document.createElementNS(le.svg,r):document.createElement(e.tagName);break}case k.Text:s=document.createTextNode(e.data);break;case k.Comment:s=document.createComment(e.data);break;case k.CDATA:s=document.createCDATASection(e.data)}return o&&t.add(s,Object.assign({},o)),s}class St extends function(t){return class vn extends t{constructor(){super(...arguments),this.nodeType=z.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=k.Document,this.textContent=null}get documentElement(){return this.childNodes.find(i=>i.RRNodeType===k.Element&&i.tagName==="HTML")||null}get body(){var i;return((i=this.documentElement)===null||i===void 0?void 0:i.childNodes.find(o=>o.RRNodeType===k.Element&&o.tagName==="BODY"))||null}get head(){var i;return((i=this.documentElement)===null||i===void 0?void 0:i.childNodes.find(o=>o.RRNodeType===k.Element&&o.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(i){const o=i.RRNodeType;if((o===k.Element||o===k.DocumentType)&&this.childNodes.some(s=>s.RRNodeType===o))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${o===k.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);return i.parentElement=null,i.parentNode=this,this.childNodes.push(i),i}insertBefore(i,o){const s=i.RRNodeType;if((s===k.Element||s===k.DocumentType)&&this.childNodes.some(a=>a.RRNodeType===s))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${s===k.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);if(o===null)return this.appendChild(i);const r=this.childNodes.indexOf(o);if(r==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(r,0,i),i.parentElement=null,i.parentNode=this,i}removeChild(i){const o=this.childNodes.indexOf(i);if(o===-1)throw new Error("Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(o,1),i.parentElement=null,i.parentNode=null,i}open(){this.childNodes=[]}close(){}write(i){let o;if(i==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?o="-//W3C//DTD XHTML 1.0 Transitional//EN":i==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(o="-//W3C//DTD HTML 4.0 Transitional//EN"),o){const s=this.createDocumentType("html",o,"");this.open(),this.appendChild(s)}}createDocument(i,o,s){return new vn}createDocumentType(i,o,s){const r=new(fn(rt))(i,o,s);return r.ownerDocument=this,r}createElement(i){const o=new(gn(rt))(i);return o.ownerDocument=this,o}createElementNS(i,o){return this.createElement(o)}createTextNode(i){const o=new(mn(rt))(i);return o.ownerDocument=this,o}createComment(i){const o=new(yn(rt))(i);return o.ownerDocument=this,o}createCDATASection(i){const o=new(Cn(rt))(i);return o.ownerDocument=this,o}toString(){return"RRDocument"}}}(rt){constructor(t){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=new Ai,this.scrollData=null,t&&(this.mirror=t)}get unserializedId(){return this._unserializedId--}createDocument(t,n,i){return new St}createDocumentType(t,n,i){const o=new hi(t,n,i);return o.ownerDocument=this,o}createElement(t){const n=t.toUpperCase();let i;switch(n){case"AUDIO":case"VIDEO":i=new pi(n);break;case"IFRAME":i=new mi(n,this.mirror);break;case"CANVAS":i=new fi(n);break;case"STYLE":i=new gi(n);break;default:i=new Lt(n)}return i.ownerDocument=this,i}createComment(t){const n=new Ci(t);return n.ownerDocument=this,n}createCDATASection(t){const n=new vi(t);return n.ownerDocument=this,n}createTextNode(t){const n=new yi(t);return n.ownerDocument=this,n}destroyTree(){this.childNodes=[],this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const hi=fn(rt);class Lt extends gn(rt){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class pi extends function(t){return class extends t{attachShadow(n){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}(Lt){}class fi extends Lt{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class gi extends Lt{constructor(){super(...arguments),this.rules=[]}}class mi extends Lt{constructor(t,n){super(t),this.contentDocument=new St,this.contentDocument.mirror=n}}const yi=mn(rt),Ci=yn(rt),vi=Cn(rt);function In(e,t,n,i){let o;switch(e.nodeType){case z.DOCUMENT_NODE:i&&i.nodeName==="IFRAME"?o=i.contentDocument:(o=t,o.compatMode=e.compatMode);break;case z.DOCUMENT_TYPE_NODE:{const r=e;o=t.createDocumentType(r.name,r.publicId,r.systemId);break}case z.ELEMENT_NODE:{const r=e,a=function(u){return u instanceof HTMLFormElement?"FORM":u.tagName.toUpperCase()}(r);o=t.createElement(a);const l=o;for(const{name:u,value:c}of Array.from(r.attributes))l.attributes[u]=c;r.scrollLeft&&(l.scrollLeft=r.scrollLeft),r.scrollTop&&(l.scrollTop=r.scrollTop);break}case z.TEXT_NODE:o=t.createTextNode(e.textContent||"");break;case z.CDATA_SECTION_NODE:o=t.createCDATASection(e.data);break;case z.COMMENT_NODE:o=t.createComment(e.textContent||"");break;case z.DOCUMENT_FRAGMENT_NODE:o=i.attachShadow({mode:"open"});break;default:return null}let s=n.getMeta(e);return t instanceof St&&(s||(s=An(o,t.unserializedId),n.add(e,s)),t.mirror.add(o,Object.assign({},s))),o}function Ii(e,t=function(){return new ri}(),n=new St){return function i(o,s){const r=In(o,n,t,s);if(r!==null)if((s==null?void 0:s.nodeName)!=="IFRAME"&&o.nodeType!==z.DOCUMENT_FRAGMENT_NODE&&(s==null||s.appendChild(r),r.parentNode=s,r.parentElement=s),o.nodeName==="IFRAME"){const a=o.contentDocument;a&&i(a,r)}else o.nodeType!==z.DOCUMENT_NODE&&o.nodeType!==z.ELEMENT_NODE&&o.nodeType!==z.DOCUMENT_FRAGMENT_NODE||(o.nodeType===z.ELEMENT_NODE&&o.shadowRoot&&i(o.shadowRoot,r),o.childNodes.forEach(a=>i(a,r)))}(e,null),n}class Ai{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var n;if(!t)return-1;const i=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return i??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(i=>this.removeNodeFromMap(i))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const i=n.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,n)}replace(t,n){const i=this.getNode(t);if(i){const o=this.nodeMetaMap.get(i);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function An(e,t){switch(e.RRNodeType){case k.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case k.DocumentType:{const n=e;return{id:t,type:e.RRNodeType,name:n.name,publicId:n.publicId,systemId:n.systemId}}case k.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case k.Text:case k.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case k.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}var nt=Uint8Array,Ct=Uint16Array,ue=Uint32Array,bn=new nt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wn=new nt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bi=new nt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Nn=function(e,t){for(var n=new Ct(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var o=new ue(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)o[s]=s-n[i]<<5|i;return[n,o]},En=Nn(bn,2),Sn=En[0],wi=En[1];Sn[28]=258,wi[258]=28;for(var Ni=Nn(wn,0)[0],Tn=new Ct(32768),Y=0;Y<32768;++Y){var gt=(43690&Y)>>>1|(21845&Y)<<1;gt=(61680&(gt=(52428&gt)>>>2|(13107&gt)<<2))>>>4|(3855&gt)<<4,Tn[Y]=((65280&gt)>>>8|(255&gt)<<8)>>>1}var Ot=function(e,t,n){for(var i=e.length,o=0,s=new Ct(t);o<i;++o)++s[e[o]-1];var r,a=new Ct(t);for(o=0;o<t;++o)a[o]=a[o-1]+s[o-1]<<1;{r=new Ct(1<<t);var l=15-t;for(o=0;o<i;++o)if(e[o])for(var u=o<<4|e[o],c=t-e[o],d=a[e[o]-1]++<<c,h=d|(1<<c)-1;d<=h;++d)r[Tn[d]>>>l]=u}return r},Vt=new nt(288);for(Y=0;Y<144;++Y)Vt[Y]=8;for(Y=144;Y<256;++Y)Vt[Y]=9;for(Y=256;Y<280;++Y)Vt[Y]=7;for(Y=280;Y<288;++Y)Vt[Y]=8;var Dn=new nt(32);for(Y=0;Y<32;++Y)Dn[Y]=5;var Ei=Ot(Vt,9),Si=Ot(Dn,5),te=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ot=function(e,t,n){var i=t/8>>0;return(e[i]|e[i+1]<<8)>>>(7&t)&n},ee=function(e,t){var n=t/8>>0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(7&t)},Mn=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var i=new(e instanceof Ct?Ct:e instanceof ue?ue:nt)(n-t);return i.set(e.subarray(t,n)),i};function Ti(e,t){return function(n,i,o){var s=n.length,r=!i||o,a=!o||o.i;o||(o={}),i||(i=new nt(3*s));var l,u=function(it){var me=i.length;if(it>me){var ye=new nt(Math.max(2*me,it));ye.set(i),i=ye}},c=o.f||0,d=o.p||0,h=o.b||0,v=o.l,f=o.d,p=o.m,m=o.n,y=8*s;do{if(!v){o.f=c=ot(n,d,1);var I=ot(n,d+1,3);if(d+=3,!I){var N=n[(S=((l=d)/8>>0)+(7&l&&1)+4)-4]|n[S-3]<<8,E=S+N;if(E>s){if(a)throw"unexpected EOF";break}r&&u(h+N),i.set(n.subarray(S,E),h),o.b=h+=N,o.p=d=8*E;continue}if(I==1)v=Ei,f=Si,p=9,m=5;else{if(I!=2)throw"invalid block type";var L=ot(n,d,31)+257,V=ot(n,d+10,15)+4,$=L+ot(n,d+5,31)+1;d+=14;for(var U=new nt($),C=new nt(19),x=0;x<V;++x)C[bi[x]]=ot(n,d+3*x,7);d+=3*V;var A=te(C),g=(1<<A)-1;if(!a&&d+$*(A+7)>y)break;var D=Ot(C,A);for(x=0;x<$;){var S,P=D[ot(n,d,g)];if(d+=15&P,(S=P>>>4)<16)U[x++]=S;else{var _=0,b=0;for(S==16?(b=3+ot(n,d,3),d+=2,_=U[x-1]):S==17?(b=3+ot(n,d,7),d+=3):S==18&&(b=11+ot(n,d,127),d+=7);b--;)U[x++]=_}}var F=U.subarray(0,L),R=U.subarray(L);p=te(F),m=te(R),v=Ot(F,p),f=Ot(R,m)}if(d>y)throw"unexpected EOF"}r&&u(h+131072);for(var Q=(1<<p)-1,J=(1<<m)-1,st=p+m+18;a||d+st<y;){var X=(_=v[ee(n,d)&Q])>>>4;if((d+=15&_)>y)throw"unexpected EOF";if(!_)throw"invalid length/literal";if(X<256)i[h++]=X;else{if(X==256){v=null;break}var w=X-254;if(X>264){var W=bn[x=X-257];w=ot(n,d,(1<<W)-1)+Sn[x],d+=W}var Z=f[ee(n,d)&J],at=Z>>>4;if(!Z)throw"invalid distance";if(d+=15&Z,R=Ni[at],at>3&&(W=wn[at],R+=ee(n,d)&(1<<W)-1,d+=W),d>y)throw"unexpected EOF";r&&u(h+131072);for(var M=h+w;h<M;h+=4)i[h]=i[h-R],i[h+1]=i[h+1-R],i[h+2]=i[h+2-R],i[h+3]=i[h+3-R];h=M}}o.l=v,o.p=d,o.b=h,v&&(c=1,o.m=p,o.d=f,o.n=m)}while(!c);return h==i.length?i:Mn(i,0,h)}((function(n){if((15&n[0])!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(32&n[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),t)}const Di=e=>{if(typeof e!="string")return e;try{const t=JSON.parse(e);if(t.timestamp)return t}catch{}try{const t=JSON.parse(function(n,i){var o="";if(!i&&typeof TextDecoder<"u")return new TextDecoder().decode(n);for(var s=0;s<n.length;){var r=n[s++];r<128||i?o+=String.fromCharCode(r):r<224?o+=String.fromCharCode((31&r)<<6|63&n[s++]):r<240?o+=String.fromCharCode((15&r)<<12|(63&n[s++])<<6|63&n[s++]):(r=((15&r)<<18|(63&n[s++])<<12|(63&n[s++])<<6|63&n[s++])-65536,o+=String.fromCharCode(55296|r>>10,56320|1023&r))}return o}(Ti(function(n,i){for(var o=n.length,s=new nt(n.length+(n.length>>>1)),r=0,a=function(d){s[r++]=d},l=0;l<o;++l){if(r+5>s.length){var u=new nt(r+8+(o-l<<1));u.set(s),s=u}var c=n.charCodeAt(l);c<128||i?a(c):c<2048?(a(192|c>>>6),a(128|63&c)):c>55295&&c<57344?(a(240|(c=65536+(1047552&c)|1023&n.charCodeAt(++l))>>>18),a(128|c>>>12&63),a(128|c>>>6&63),a(128|63&c)):(a(224|c>>>12),a(128|c>>>6&63),a(128|63&c))}return Mn(s,0,r)}(e,!0))));if(t.v==="v1")return t;throw new Error(`These events were packed with packer ${t.v} which is incompatible with current packer v1.`)}catch(t){throw console.error(t),new Error("Unknown data format.")}};function Mi(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i?i.push(n):e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var i=e.get(t);i&&i.slice().map(function(o){o(n)}),(i=e.get("*"))&&i.slice().map(function(o){o(t,n)})}}}var bt;function Ri(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&e.__forceSmoothScrollPolyfill__!==!0)return;const n=e.HTMLElement||e.Element,i={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:n.prototype.scroll||a,scrollIntoView:n.prototype.scrollIntoView},o=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,s=(r=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(r)?1:0);var r;function a(p,m){this.scrollLeft=p,this.scrollTop=m}function l(p){if(p===null||typeof p!="object"||p.behavior===void 0||p.behavior==="auto"||p.behavior==="instant")return!0;if(typeof p=="object"&&p.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+p.behavior+" is not a valid value for enumeration ScrollBehavior.")}function u(p,m){return m==="Y"?p.clientHeight+s<p.scrollHeight:m==="X"?p.clientWidth+s<p.scrollWidth:void 0}function c(p,m){const y=e.getComputedStyle(p,null)["overflow"+m];return y==="auto"||y==="scroll"}function d(p){const m=u(p,"Y")&&c(p,"Y"),y=u(p,"X")&&c(p,"X");return m||y}function h(p){for(;p!==t.body&&d(p)===!1;)p=p.parentNode||p.host;return p}function v(p){let m,y,I,N=(o()-p.startTime)/468;var E;N=N>1?1:N,E=N,m=.5*(1-Math.cos(Math.PI*E)),y=p.startX+(p.x-p.startX)*m,I=p.startY+(p.y-p.startY)*m,p.method.call(p.scrollable,y,I),y===p.x&&I===p.y||e.requestAnimationFrame(v.bind(e,p))}function f(p,m,y){let I,N,E,L;const V=o();p===t.body?(I=e,N=e.scrollX||e.pageXOffset,E=e.scrollY||e.pageYOffset,L=i.scroll):(I=p,N=p.scrollLeft,E=p.scrollTop,L=a),v({scrollable:I,method:L,startTime:V,startX:N,startY:E,x:m,y})}e.scroll=e.scrollTo=function(){arguments[0]!==void 0&&(l(arguments[0])!==!0?f.call(e,t.body,arguments[0].left!==void 0?~~arguments[0].left:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:e.scrollY||e.pageYOffset):i.scroll.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){arguments[0]!==void 0&&(l(arguments[0])?i.scrollBy.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0):f.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(l(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");return void i.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop)}const p=arguments[0].left,m=arguments[0].top;f.call(this,this,p===void 0?this.scrollLeft:~~p,m===void 0?this.scrollTop:~~m)},n.prototype.scrollBy=function(){arguments[0]!==void 0&&(l(arguments[0])!==!0?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(l(arguments[0])===!0)return void i.scrollIntoView.call(this,arguments[0]===void 0||arguments[0]);const p=h(this),m=p.getBoundingClientRect(),y=this.getBoundingClientRect();p!==t.body?(f.call(this,p,p.scrollLeft+y.left-m.left,p.scrollTop+y.top-m.top),e.getComputedStyle(p).position!=="fixed"&&e.scrollBy({left:m.left,top:m.top,behavior:"smooth"})):e.scrollBy({left:y.left,top:y.top,behavior:"smooth"})}}class xi{constructor(t=[],n){this.timeOffset=0,this.raf=null,this.actions=t,this.speed=n.speed,this.liveMode=n.liveMode}addAction(t){if(!this.actions.length||this.actions[this.actions.length-1].delay<=t.delay)return void this.actions.push(t);const n=this.findActionIndex(t);this.actions.splice(n,0,t)}start(){this.timeOffset=0;let t=performance.now();const n=()=>{const i=performance.now();for(this.timeOffset+=(i-t)*this.speed,t=i;this.actions.length;){const o=this.actions[0];if(!(this.timeOffset>=o.delay))break;this.actions.shift(),o.doAction()}(this.actions.length>0||this.liveMode)&&(this.raf=requestAnimationFrame(n))};this.raf=requestAnimationFrame(n)}clear(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(t){this.speed=t}toggleLiveMode(t){this.liveMode=t}isActive(){return this.raf!==null}findActionIndex(t){let n=0,i=this.actions.length-1;for(;n<=i;){const o=Math.floor((n+i)/2);if(this.actions[o].delay<t.delay)n=o+1;else{if(!(this.actions[o].delay>t.delay))return o+1;i=o-1}}return n}}function Oe(e,t){if(e.type===K.IncrementalSnapshot&&e.data.source===O.MouseMove&&e.data.positions&&e.data.positions.length){const n=e.data.positions[0].timeOffset,i=e.timestamp+n;return e.delay=i-t,i-t}return e.delay=e.timestamp-t,e.delay}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Be(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i,o,s=n.call(e),r=[];try{for(;(t===void 0||t-- >0)&&!(i=s.next()).done;)r.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return r}(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(bt||(bt={}));var Rn={type:"xstate.init"};function ne(e){return e===void 0?[]:[].concat(e)}function At(e){return{type:"xstate.assign",assignment:e}}function Le(e,t){return typeof(e=typeof e=="string"&&t&&t[e]?t[e]:e)=="string"?{type:e}:typeof e=="function"?{type:e.name,exec:e}:e}function zt(e){return function(t){return e===t}}function xn(e){return typeof e=="string"?{type:e}:e}function Ve(e,t){return{value:e,context:t,actions:[],changed:!1,matches:zt(e)}}function _e(e,t,n){var i=t,o=!1;return[e.filter(function(s){if(s.type==="xstate.assign"){o=!0;var r=Object.assign({},i);return typeof s.assignment=="function"?r=s.assignment(i,n):Object.keys(s.assignment).forEach(function(a){r[a]=typeof s.assignment[a]=="function"?s.assignment[a](i,n):s.assignment[a]}),i=r,!1}return!0}),i,o]}function kn(e,t){t===void 0&&(t={});var n=Be(_e(ne(e.states[e.initial].entry).map(function(r){return Le(r,t.actions)}),e.context,Rn),2),i=n[0],o=n[1],s={config:e,_options:t,initialState:{value:e.initial,actions:i,context:o,matches:zt(e.initial)},transition:function(r,a){var l,u,c=typeof r=="string"?{value:r,context:e.context}:r,d=c.value,h=c.context,v=xn(a),f=e.states[d];if(f.on){var p=ne(f.on[v.type]);try{for(var m=function(b){var F=typeof Symbol=="function"&&Symbol.iterator,R=F&&b[F],Q=0;if(R)return R.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&Q>=b.length&&(b=void 0),{value:b&&b[Q++],done:!b}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),y=m.next();!y.done;y=m.next()){var I=y.value;if(I===void 0)return Ve(d,h);var N=typeof I=="string"?{target:I}:I,E=N.target,L=N.actions,V=L===void 0?[]:L,$=N.cond,U=$===void 0?function(){return!0}:$,C=E===void 0,x=E??d,A=e.states[x];if(U(h,v)){var g=Be(_e((C?ne(V):[].concat(f.exit,V,A.entry).filter(function(b){return b})).map(function(b){return Le(b,s._options.actions)}),h,v),3),D=g[0],S=g[1],P=g[2],_=E??d;return{value:_,context:S,actions:D,changed:E!==d||D.length>0||P,matches:zt(_)}}}}catch(b){l={error:b}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(l)throw l.error}}}return Ve(d,h)}};return s}var We=function(e,t){return e.actions.forEach(function(n){var i=n.exec;return i&&i(e.context,t)})};function Fn(e){var t=e.initialState,n=bt.NotStarted,i=new Set,o={_machine:e,send:function(s){n===bt.Running&&(t=e.transition(t,s),We(t,xn(s)),i.forEach(function(r){return r(t)}))},subscribe:function(s){return i.add(s),s(t),{unsubscribe:function(){return i.delete(s)}}},start:function(s){if(s){var r=typeof s=="object"?s:{context:e.config.context,value:s};t={value:r.value,actions:[],context:r.context,matches:zt(r.value)}}return n=bt.Running,We(t,Rn),o},stop:function(){return n=bt.Stopped,i.clear(),o},get state(){return t},get status(){return n}};return o}function ki(e,{getCastFn:t,applyEventsSynchronously:n,emitter:i}){const o=kn({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:At({lastPlayedEvent:(s,r)=>r.type==="CAST_EVENT"?r.payload.event:s.lastPlayedEvent}),recordTimeOffset:At((s,r)=>{let a=s.timeOffset;return"payload"in r&&"timeOffset"in r.payload&&(a=r.payload.timeOffset),Object.assign(Object.assign({},s),{timeOffset:a,baselineTime:s.events[0].timestamp+a})}),play(s){var r;const{timer:a,events:l,baselineTime:u,lastPlayedEvent:c}=s;a.clear();for(const f of l)Oe(f,u);const d=function(f,p){for(let m=f.length-1;m>=0;m--){const y=f[m];if(y.type===K.Meta&&y.timestamp<=p)return f.slice(m)}return f}(l,u);let h=c==null?void 0:c.timestamp;(c==null?void 0:c.type)===K.IncrementalSnapshot&&c.data.source===O.MouseMove&&(h=c.timestamp+((r=c.data.positions[0])===null||r===void 0?void 0:r.timeOffset)),u<(h||0)&&i.emit(G.PlayBack);const v=new Array;for(const f of d)if(!(h&&h<u&&(f.timestamp<=h||f===c)))if(f.timestamp<u)v.push(f);else{const p=t(f,!1);a.addAction({doAction:()=>{p()},delay:f.delay})}n(v),i.emit(G.Flush),a.start()},pause(s){s.timer.clear()},resetLastPlayedEvent:At(s=>Object.assign(Object.assign({},s),{lastPlayedEvent:null})),startLive:At({baselineTime:(s,r)=>(s.timer.toggleLiveMode(!0),s.timer.start(),r.type==="TO_LIVE"&&r.payload.baselineTime?r.payload.baselineTime:Date.now())}),addEvent:At((s,r)=>{const{baselineTime:a,timer:l,events:u}=s;if(r.type==="ADD_EVENT"){const{event:c}=r.payload;Oe(c,a);let d=u.length-1;if(!u[d]||u[d].timestamp<=c.timestamp)u.push(c);else{let f=-1,p=0;for(;p<=d;){const m=Math.floor((p+d)/2);u[m].timestamp<=c.timestamp?p=m+1:d=m-1}f===-1&&(f=p),u.splice(f,0,c)}const h=c.timestamp<a,v=t(c,h);h?v():l.isActive()&&l.addAction({doAction:()=>{v()},delay:c.delay})}return Object.assign(Object.assign({},s),{events:u})})}});return Fn(o)}const Ge=new Map;function On(e,t){let n=Ge.get(e);return n||(n=new Map,Ge.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}function pt(e,t,n){return i=>yt(this,void 0,void 0,function*(){if(i&&typeof i=="object"&&"rr_type"in i){if(n&&(n.isUnchanged=!1),i.rr_type==="ImageBitmap"&&"args"in i){const o=yield pt(e,t,n)(i.args);return yield createImageBitmap.apply(null,o)}if("index"in i){if(n||t===null)return i;const{rr_type:o,index:s}=i;return On(t,o)[s]}if("args"in i){const{rr_type:o,args:s}=i;return new window[o](...yield Promise.all(s.map(pt(e,t,n))))}if("base64"in i)return function(o){var s,r,a,l,u,c=.75*o.length,d=o.length,h=0;o[o.length-1]==="="&&(c--,o[o.length-2]==="="&&c--);var v=new ArrayBuffer(c),f=new Uint8Array(v);for(s=0;s<d;s+=4)r=Rt[o.charCodeAt(s)],a=Rt[o.charCodeAt(s+1)],l=Rt[o.charCodeAt(s+2)],u=Rt[o.charCodeAt(s+3)],f[h++]=r<<2|a>>4,f[h++]=(15&a)<<4|l>>2,f[h++]=(3&l)<<6|63&u;return v}(i.base64);if("src"in i){const o=e.get(i.src);if(o)return o;{const s=new Image;return s.src=i.src,e.set(i.src,s),s}}if("data"in i&&i.rr_type==="Blob"){const o=yield Promise.all(i.data.map(pt(e,t,n)));return new Blob(o,{type:i.type})}}else if(Array.isArray(i))return yield Promise.all(i.map(pt(e,t,n)));return i})}const Fi=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function Oi({mutation:e,target:t,type:n,imageMap:i,errorHandler:o}){return yt(this,void 0,void 0,function*(){try{const s=function(l,u){try{return u===Qt.WebGL?l.getContext("webgl")||l.getContext("experimental-webgl"):l.getContext("webgl2")}catch{return null}}(t,n);if(!s)return;if(e.setter)return void(s[e.property]=e.args[0]);const r=s[e.property],a=yield Promise.all(e.args.map(pt(i,s)));(function(l,u){if(!(u!=null&&u.constructor))return;const{name:c}=u.constructor;if(!Fi.includes(c))return;const d=On(l,c);d.includes(u)||d.push(u)})(s,r.apply(s,a))}catch(s){o(e,s)}})}function Bi({event:e,mutation:t,target:n,imageMap:i,errorHandler:o}){return yt(this,void 0,void 0,function*(){try{const s=n.getContext("2d");if(t.setter)return void(s[t.property]=t.args[0]);const r=s[t.property];if(t.property==="drawImage"&&typeof t.args[0]=="string")i.get(e),r.apply(s,t.args);else{const a=yield Promise.all(t.args.map(pt(i,s)));r.apply(s,a)}}catch(s){o(t,s)}})}function Ue({event:e,mutation:t,target:n,imageMap:i,canvasEventMap:o,errorHandler:s}){return yt(this,void 0,void 0,function*(){try{const r=o.get(e)||t,a="commands"in r?r.commands:[r];if([Qt.WebGL,Qt.WebGL2].includes(t.type)){for(let l=0;l<a.length;l++){const u=a[l];yield Oi({mutation:u,type:t.type,target:n,imageMap:i,errorHandler:s})}return}for(let l=0;l<a.length;l++){const u=a[l];yield Bi({event:e,mutation:u,target:n,imageMap:i,errorHandler:s})}}catch(r){s(t,r)}})}const Li=Mi,ie={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function Ze(e){return e.type==K.IncrementalSnapshot&&(e.data.source==O.TouchMove||e.data.source==O.MouseInteraction&&e.data.type==tt.TouchStart)}class Vi{constructor(t,n){if(this.usingVirtualDom=!1,this.virtualDom=new St,this.mouseTail=null,this.tailPositions=[],this.emitter=Li(),this.legacy_missingNodeRetryMap={},this.cache=Ee(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=Jn(),this.styleMirror=new ei,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=a=>{this.iframe.style.display="inherit";for(const l of[this.mouseTail,this.iframe])l&&(l.setAttribute("width",String(a.width)),l.setAttribute("height",String(a.height)))},this.applyEventsSynchronously=a=>{for(const l of a){switch(l.type){case K.DomContentLoaded:case K.Load:case K.Custom:continue;case K.FullSnapshot:case K.Meta:case K.Plugin:case K.IncrementalSnapshot:}this.getCastFn(l,!0)()}this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null},this.getCastFn=(a,l=!1)=>{let u;switch(a.type){case K.DomContentLoaded:case K.Load:break;case K.Custom:u=()=>{this.emitter.emit(G.CustomEvent,a)};break;case K.Meta:u=()=>this.emitter.emit(G.Resize,{width:a.data.width,height:a.data.height});break;case K.FullSnapshot:u=()=>{var c;if(this.firstFullSnapshot){if(this.firstFullSnapshot===a)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(a,l),(c=this.iframe.contentWindow)===null||c===void 0||c.scrollTo(a.data.initialOffset),this.styleMirror.reset()};break;case K.IncrementalSnapshot:u=()=>{if(this.applyIncremental(a,l),!l&&(a===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const c of this.service.state.context.events)if(!(c.timestamp<=a.timestamp)&&this.isUserInteraction(c)){c.delay-a.delay>1e4*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=c);break}if(this.nextUserInteractionEvent){const c=this.nextUserInteractionEvent.delay-a.delay,d={speed:Math.min(Math.round(c/5e3),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:d}),this.emitter.emit(G.SkipStart,d)}}}}return()=>{u&&u();for(const d of this.config.plugins||[])d.handler&&d.handler(a,l,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:a}});const c=this.service.state.context.events.length-1;if(a===this.service.state.context.events[c]){const d=()=>{c<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(G.Finish))};a.type===K.IncrementalSnapshot&&a.data.source===O.MouseMove&&a.data.positions.length?setTimeout(()=>{d()},Math.max(0,50-a.data.positions[0].timeOffset)):d()}this.emitter.emit(G.EventCast,a)}},!(n!=null&&n.liveMode)&&t.length<2)throw new Error("Replayer need at least 2 events.");const i={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:ie,useVirtualDom:!0};this.config=Object.assign({},i,n),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(G.Resize,this.handleResize),this.setupDom();for(const a of this.config.plugins||[])a.getMirror&&a.getMirror({nodeMirror:this.mirror});this.emitter.on(G.Flush,()=>{if(this.usingVirtualDom){const a={mirror:this.mirror,applyCanvas:(l,u,c)=>{Ue({event:l,mutation:u,target:c,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(l,u)=>{l.source===O.StyleSheetRule?this.applyStyleSheetRule(l,u):l.source===O.StyleDeclaration&&this.applyStyleDeclaration(l,u)}};if(this.iframe.contentDocument&&lt(this.iframe.contentDocument,this.virtualDom,a,this.virtualDom.mirror),this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const l in this.legacy_missingNodeRetryMap)try{const u=this.legacy_missingNodeRetryMap[l],c=ce(u.node,this.mirror,this.virtualDom.mirror);lt(c,u.node,a,this.virtualDom.mirror),u.node=c}catch(u){this.config.showWarning&&console.warn(u)}this.constructedStyleMutations.forEach(l=>{this.applyStyleSheetMutation(l)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(l=>{this.applyAdoptedStyleSheet(l)}),this.adoptedStyleSheets=[]}this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(G.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset()});const o=new xi([],{speed:this.config.speed,liveMode:this.config.liveMode});this.service=ki({events:t.map(a=>n&&n.unpackFn?n.unpackFn(a):a).sort((a,l)=>a.timestamp-l.timestamp),timer:o,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(a=>{this.emitter.emit(G.StateChange,{player:a})}),this.speedService=Fn(kn({id:"speed",context:{normalSpeed:-1,timer:o},initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(a,l)=>{"payload"in l&&a.timer.setSpeed(l.payload.speed)},recordSpeed:At({normalSpeed:a=>a.timer.speed}),restoreSpeed:a=>{a.timer.setSpeed(a.normalSpeed)}}})),this.speedService.start(),this.speedService.subscribe(a=>{this.emitter.emit(G.StateChange,{speed:a})});const s=this.service.state.context.events.find(a=>a.type===K.Meta),r=this.service.state.context.events.find(a=>a.type===K.FullSnapshot);if(s){const{width:a,height:l}=s.data;setTimeout(()=>{this.emitter.emit(G.Resize,{width:a,height:l})},0)}r&&setTimeout(()=>{var a;this.firstFullSnapshot||(this.firstFullSnapshot=r,this.rebuildFullSnapshot(r),(a=this.iframe.contentWindow)===null||a===void 0||a.scrollTo(r.data.initialOffset))},1),this.service.state.context.events.find(Ze)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(t,n){return this.emitter.on(t,n),this}off(t,n){return this.emitter.off(t,n),this}setConfig(t){Object.keys(t).forEach(n=>{t[n],this.config[n]=t[n]}),this.config.skipInactive||this.backToNormal(),t.speed!==void 0&&this.speedService.send({type:"SET_SPEED",payload:{speed:t.speed}}),t.mouseTail!==void 0&&(t.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const t=this.service.state.context.events[0],n=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:t.timestamp,endTime:n.timestamp,totalTime:n.timestamp-t.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:t,events:n}=this.service.state.context;return t-n[0].timestamp}getMirror(){return this.mirror}play(t=0){var n,i;this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:t}}),(i=(n=this.iframe.contentDocument)===null||n===void 0?void 0:n.getElementsByTagName("html")[0])===null||i===void 0||i.classList.remove("rrweb-paused"),this.emitter.emit(G.Start)}pause(t){var n,i;t===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof t=="number"&&(this.play(t),this.service.send({type:"PAUSE"})),(i=(n=this.iframe.contentDocument)===null||n===void 0?void 0:n.getElementsByTagName("html")[0])===null||i===void 0||i.classList.add("rrweb-paused"),this.emitter.emit(G.Pause)}resume(t=0){console.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(t),this.emitter.emit(G.Resume)}destroy(){this.pause(),this.config.root.removeChild(this.wrapper),this.emitter.emit(G.Destroy)}startLive(t){this.service.send({type:"TO_LIVE",payload:{baselineTime:t}})}addEvent(t){const n=this.config.unpackFn?this.config.unpackFn(t):t;Ze(n)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:n}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=Ee()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const t=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&t.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",t.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(Ri(this.iframe.contentWindow,this.iframe.contentDocument),function(n=window){"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...i)=>{let o=i[0];if(!(0 in i))throw new TypeError("1 argument is required");do if(this===o)return!0;while(o=o&&o.parentNode);return!1})}(this.iframe.contentWindow))}rebuildFullSnapshot(t,n=!1){if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const i=[],o=(a,l)=>{this.collectIframeAndAttachDocument(i,a);for(const u of this.config.plugins||[])u.onBuild&&u.onBuild(a,{id:l,replayer:this})};qn(t.data.node,{doc:this.iframe.contentDocument,afterAppend:o,cache:this.cache,mirror:this.mirror}),o(this.iframe.contentDocument,t.data.node.id);for(const{mutationInQueue:a,builtNode:l}of i)this.attachDocumentToIframe(a,l),this.newDocumentQueue=this.newDocumentQueue.filter(u=>u!==a);const{documentElement:s,head:r}=this.iframe.contentDocument;this.insertStyleRules(s,r),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(G.FullsnapshotRebuilded,t),n||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(t,n){var i;const o=(s=this.config.blockClass,[`.${s} { background: currentColor }`,"noscript { display: none !important; }"]).concat(this.config.insertStyleRules);var s;if(this.config.pauseAnimation&&o.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const r=this.virtualDom.createElement("style");this.virtualDom.mirror.add(r,An(r,this.virtualDom.unserializedId)),t.insertBefore(r,n),r.rules.push({source:O.StyleSheetRule,adds:o.map((a,l)=>({rule:a,index:l}))})}else{const r=document.createElement("style");t.insertBefore(r,n);for(let a=0;a<o.length;a++)(i=r.sheet)===null||i===void 0||i.insertRule(o[a],a)}}attachDocumentToIframe(t,n){const i=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,o=[],s=(r,a)=>{this.collectIframeAndAttachDocument(o,r);const l=i.getMeta(r);if((l==null?void 0:l.type)===q.Element&&(l==null?void 0:l.tagName.toUpperCase())==="HTML"){const{documentElement:u,head:c}=n.contentDocument;this.insertStyleRules(u,c)}for(const u of this.config.plugins||[])u.onBuild&&u.onBuild(r,{id:a,replayer:this})};Ft(t.node,{doc:n.contentDocument,mirror:i,hackCss:!0,skipChild:!1,afterAppend:s,cache:this.cache}),s(n.contentDocument,t.node.id);for(const{mutationInQueue:r,builtNode:a}of o)this.attachDocumentToIframe(r,a),this.newDocumentQueue=this.newDocumentQueue.filter(l=>l!==r)}collectIframeAndAttachDocument(t,n){if(jt(n,this.mirror)){const i=this.newDocumentQueue.find(o=>o.parentId===this.mirror.getId(n));i&&t.push({mutationInQueue:i,builtNode:n})}}waitForStylesheetLoad(){var t;const n=(t=this.iframe.contentDocument)===null||t===void 0?void 0:t.head;if(n){const i=new Set;let o,s=this.service.state;const r=()=>{s=this.service.state};this.emitter.on(G.Start,r),this.emitter.on(G.Pause,r);const a=()=>{this.emitter.off(G.Start,r),this.emitter.off(G.Pause,r)};n.querySelectorAll('link[rel="stylesheet"]').forEach(l=>{l.sheet||(i.add(l),l.addEventListener("load",()=>{i.delete(l),i.size===0&&o!==-1&&(s.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(G.LoadStylesheetEnd),o&&clearTimeout(o),a())}))}),i.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(G.LoadStylesheetStart),o=setTimeout(()=>{s.matches("playing")&&this.play(this.getCurrentTime()),o=-1,a()},this.config.loadTimeout))}}preloadAllImages(){return yt(this,void 0,void 0,function*(){this.service.state;const t=()=>{this.service.state};this.emitter.on(G.Start,t),this.emitter.on(G.Pause,t);const n=[];for(const i of this.service.state.context.events)i.type===K.IncrementalSnapshot&&i.data.source===O.CanvasMutation&&(n.push(this.deserializeAndPreloadCanvasEvents(i.data,i)),("commands"in i.data?i.data.commands:[i.data]).forEach(o=>{this.preloadImages(o,i)}));return Promise.all(n)})}preloadImages(t,n){if(t.property==="drawImage"&&typeof t.args[0]=="string"&&!this.imageMap.has(n)){const i=document.createElement("canvas"),o=i.getContext("2d"),s=o==null?void 0:o.createImageData(i.width,i.height);s==null||s.data,JSON.parse(t.args[0]),o==null||o.putImageData(s,0,0)}}deserializeAndPreloadCanvasEvents(t,n){return yt(this,void 0,void 0,function*(){if(!this.canvasEventMap.has(n)){const i={isUnchanged:!0};if("commands"in t){const o=yield Promise.all(t.commands.map(s=>yt(this,void 0,void 0,function*(){const r=yield Promise.all(s.args.map(pt(this.imageMap,null,i)));return Object.assign(Object.assign({},s),{args:r})})));i.isUnchanged===!1&&this.canvasEventMap.set(n,Object.assign(Object.assign({},t),{commands:o}))}else{const o=yield Promise.all(t.args.map(pt(this.imageMap,null,i)));i.isUnchanged===!1&&this.canvasEventMap.set(n,Object.assign(Object.assign({},t),{args:o}))}}})}applyIncremental(t,n){var i,o,s;const{data:r}=t;switch(r.source){case O.Mutation:try{this.applyMutation(r,n)}catch(a){this.warn(`Exception in mutation ${a.message||a}`,r)}break;case O.Drag:case O.TouchMove:case O.MouseMove:if(n){const a=r.positions[r.positions.length-1];this.mousePos={x:a.x,y:a.y,id:a.id,debugData:r}}else r.positions.forEach(a=>{const l={doAction:()=>{this.moveAndHover(a.x,a.y,a.id,n,r)},delay:a.timeOffset+t.timestamp-this.service.state.context.baselineTime};this.timer.addAction(l)}),this.timer.addAction({doAction(){},delay:t.delay-((i=r.positions[0])===null||i===void 0?void 0:i.timeOffset)});break;case O.MouseInteraction:{if(r.id===-1||n)break;const a=new Event(tt[r.type].toLowerCase()),l=this.mirror.getNode(r.id);if(!l)return this.debugNodeNotFound(r,r.id);this.emitter.emit(G.MouseInteraction,{type:r.type,target:l});const{triggerFocus:u}=this.config;switch(r.type){case tt.Blur:"blur"in l&&l.blur();break;case tt.Focus:u&&l.focus&&l.focus({preventScroll:!0});break;case tt.Click:case tt.TouchStart:case tt.TouchEnd:n?(r.type===tt.TouchStart?this.touchActive=!0:r.type===tt.TouchEnd&&(this.touchActive=!1),this.mousePos={x:r.x,y:r.y,id:r.id,debugData:r}):(r.type===tt.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(r.x,r.y,r.id,n,r),r.type===tt.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):r.type===tt.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):r.type===tt.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case tt.TouchCancel:n?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:l.dispatchEvent(a)}break}case O.Scroll:if(r.id===-1)break;if(this.usingVirtualDom){const a=this.virtualDom.mirror.getNode(r.id);if(!a)return this.debugNodeNotFound(r,r.id);a.scrollData=r;break}this.applyScroll(r,n);break;case O.ViewportResize:this.emitter.emit(G.Resize,{width:r.width,height:r.height});break;case O.Input:if(r.id===-1)break;if(this.usingVirtualDom){const a=this.virtualDom.mirror.getNode(r.id);if(!a)return this.debugNodeNotFound(r,r.id);a.inputData=r;break}this.applyInput(r);break;case O.MediaInteraction:{const a=this.usingVirtualDom?this.virtualDom.mirror.getNode(r.id):this.mirror.getNode(r.id);if(!a)return this.debugNodeNotFound(r,r.id);const l=a;try{r.currentTime&&(l.currentTime=r.currentTime),r.volume&&(l.volume=r.volume),r.muted&&(l.muted=r.muted),r.type===1&&l.pause(),r.type===0&&l.play(),r.type===4&&(l.playbackRate=r.playbackRate)}catch(u){this.config.showWarning&&console.warn(`Failed to replay media interactions: ${u.message||u}`)}break}case O.StyleSheetRule:case O.StyleDeclaration:this.usingVirtualDom?r.styleId?this.constructedStyleMutations.push(r):r.id&&((o=this.virtualDom.mirror.getNode(r.id))===null||o===void 0||o.rules.push(r)):this.applyStyleSheetMutation(r);break;case O.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const a=this.virtualDom.mirror.getNode(r.id);if(!a)return this.debugNodeNotFound(r,r.id);a.canvasMutations.push({event:t,mutation:r})}else{const a=this.mirror.getNode(r.id);if(!a)return this.debugNodeNotFound(r,r.id);Ue({event:t,mutation:r,target:a,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case O.Font:try{const a=new FontFace(r.family,r.buffer?new Uint8Array(JSON.parse(r.fontSource)):r.fontSource,r.descriptors);(s=this.iframe.contentDocument)===null||s===void 0||s.fonts.add(a)}catch(a){this.config.showWarning&&console.warn(a)}break;case O.Selection:if(n){this.lastSelectionData=r;break}this.applySelection(r);break;case O.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(r):this.applyAdoptedStyleSheet(r)}}applyMutation(t,n){if(this.config.useVirtualDom&&!this.usingVirtualDom&&n&&(this.usingVirtualDom=!0,Ii(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const l in this.legacy_missingNodeRetryMap)try{const u=this.legacy_missingNodeRetryMap[l],c=In(u.node,this.virtualDom,this.mirror);c&&(u.node=c)}catch(u){this.config.showWarning&&console.warn(u)}const i=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;t.removes.forEach(l=>{var u;const c=i.getNode(l.id);if(!c)return t.removes.find(h=>h.id===l.parentId)?void 0:this.warnNodeNotFound(t,l.id);let d=i.getNode(l.parentId);if(!d)return this.warnNodeNotFound(t,l.parentId);if(l.isShadow&&Wt(d)&&(d=d.shadowRoot),i.removeNodeFromMap(c),d)try{d.removeChild(c),this.usingVirtualDom&&c.nodeName==="#text"&&d.nodeName==="STYLE"&&((u=d.rules)===null||u===void 0?void 0:u.length)>0&&(d.rules=[])}catch(h){if(!(h instanceof DOMException))throw h;this.warn("parent could not remove child in mutation",d,c,t)}});const o=Object.assign({},this.legacy_missingNodeRetryMap),s=[],r=l=>{var u;if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");let c=i.getNode(l.parentId);if(!c)return l.node.type===q.Document?this.newDocumentQueue.push(l):s.push(l);l.node.isShadow&&(Wt(c)||c.attachShadow({mode:"open"}),c=c.shadowRoot);let d=null,h=null;if(l.previousId&&(d=i.getNode(l.previousId)),l.nextId&&(h=i.getNode(l.nextId)),(y=>{let I=null;return y.nextId&&(I=i.getNode(y.nextId)),y.nextId!==null&&y.nextId!==void 0&&y.nextId!==-1&&!I})(l))return s.push(l);if(l.node.rootId&&!i.getNode(l.node.rootId))return;const v=l.node.rootId?i.getNode(l.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(jt(c,i))return void this.attachDocumentToIframe(l,c);const f=(y,I)=>{for(const N of this.config.plugins||[])N.onBuild&&N.onBuild(y,{id:I,replayer:this})},p=Ft(l.node,{doc:v,mirror:i,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:f});if(l.previousId===-1||l.nextId===-1)return void(o[l.node.id]={node:p,mutation:l});const m=i.getMeta(c);if(m&&m.type===q.Element&&m.tagName==="textarea"&&l.node.type===q.Text){const y=Array.isArray(c.childNodes)?c.childNodes:Array.from(c.childNodes);for(const I of y)I.nodeType===c.TEXT_NODE&&c.removeChild(I)}if(d&&d.nextSibling&&d.nextSibling.parentNode)c.insertBefore(p,d.nextSibling);else if(h&&h.parentNode)c.contains(h)?c.insertBefore(p,h):c.insertBefore(p,null);else{if(c===v)for(;v.firstChild;)v.removeChild(v.firstChild);c.appendChild(p)}if(f(p,l.node.id),this.usingVirtualDom&&p.nodeName==="#text"&&c.nodeName==="STYLE"&&((u=c.rules)===null||u===void 0?void 0:u.length)>0&&(c.rules=[]),jt(p,this.mirror)){const y=this.mirror.getId(p),I=this.newDocumentQueue.find(N=>N.parentId===y);I&&(this.attachDocumentToIframe(I,p),this.newDocumentQueue=this.newDocumentQueue.filter(N=>N!==I))}(l.previousId||l.nextId)&&this.legacy_resolveMissingNode(o,c,p,l)};t.adds.forEach(l=>{r(l)});const a=Date.now();for(;s.length;){const l=ti(s);if(s.length=0,Date.now()-a>500){this.warn("Timeout in the loop, please check the resolve tree data:",l);break}for(const u of l)i.getNode(u.value.parentId)?dn(u,c=>{r(c)}):this.debug("Drop resolve tree since there is no parent for the root node.",u)}Object.keys(o).length&&Object.assign(this.legacy_missingNodeRetryMap,o),function(l){const u=new Set,c=[];for(let d=l.length;d--;){const h=l[d];u.has(h.id)||(c.push(h),u.add(h.id))}return c}(t.texts).forEach(l=>{var u;const c=i.getNode(l.id);if(!c)return t.removes.find(d=>d.id===l.id)?void 0:this.warnNodeNotFound(t,l.id);if(c.textContent=l.value,this.usingVirtualDom){const d=c.parentNode;((u=d==null?void 0:d.rules)===null||u===void 0?void 0:u.length)>0&&(d.rules=[])}}),t.attributes.forEach(l=>{const u=i.getNode(l.id);if(!u)return t.removes.find(c=>c.id===l.id)?void 0:this.warnNodeNotFound(t,l.id);for(const c in l.attributes)if(typeof c=="string"){const d=l.attributes[c];if(d===null)u.removeAttribute(c);else if(typeof d=="string")try{if(c==="_cssText"&&(u.nodeName==="LINK"||u.nodeName==="STYLE"))try{const h=i.getMeta(u);Object.assign(h.attributes,l.attributes);const v=Ft(h,{doc:u.ownerDocument,mirror:i,skipChild:!0,hackCss:!0,cache:this.cache}),f=u.nextSibling,p=u.parentNode;if(v&&p){p.removeChild(u),p.insertBefore(v,f),i.replace(l.id,v);break}}catch{}u.setAttribute(c,d)}catch(h){this.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",h)}else if(c==="style"){const h=d,v=u;for(const f in h)if(h[f]===!1)v.style.removeProperty(f);else if(h[f]instanceof Array){const p=h[f];v.style.setProperty(f,p[0],p[1])}else{const p=h[f];v.style.setProperty(f,p)}}}})}applyScroll(t,n){var i,o;const s=this.mirror.getNode(t.id);if(!s)return this.debugNodeNotFound(t,t.id);const r=this.mirror.getMeta(s);if(s===this.iframe.contentDocument)(i=this.iframe.contentWindow)===null||i===void 0||i.scrollTo({top:t.y,left:t.x,behavior:n?"auto":"smooth"});else if((r==null?void 0:r.type)===q.Document)(o=s.defaultView)===null||o===void 0||o.scrollTo({top:t.y,left:t.x,behavior:n?"auto":"smooth"});else try{s.scrollTo({top:t.y,left:t.x,behavior:n?"auto":"smooth"})}catch{}}applyInput(t){const n=this.mirror.getNode(t.id);if(!n)return this.debugNodeNotFound(t,t.id);try{n.checked=t.isChecked,n.value=t.text}catch{}}applySelection(t){try{const n=new Set,i=t.ranges.map(({start:o,startOffset:s,end:r,endOffset:a})=>{const l=this.mirror.getNode(o),u=this.mirror.getNode(r);if(!l||!u)return;const c=new Range;c.setStart(l,s),c.setEnd(u,a);const d=l.ownerDocument,h=d==null?void 0:d.getSelection();return h&&n.add(h),{range:c,selection:h}});n.forEach(o=>o.removeAllRanges()),i.forEach(o=>{var s;return o&&((s=o.selection)===null||s===void 0?void 0:s.addRange(o.range))})}catch{}}applyStyleSheetMutation(t){var n;let i=null;t.styleId?i=this.styleMirror.getStyle(t.styleId):t.id&&(i=((n=this.mirror.getNode(t.id))===null||n===void 0?void 0:n.sheet)||null),i&&(t.source===O.StyleSheetRule?this.applyStyleSheetRule(t,i):t.source===O.StyleDeclaration&&this.applyStyleDeclaration(t,i))}applyStyleSheetRule(t,n){var i,o,s,r;if((i=t.adds)===null||i===void 0||i.forEach(({rule:a,index:l})=>{try{if(Array.isArray(l)){const{positions:u,index:c}=Te(l);Mt(n.cssRules,u).insertRule(a,c)}else{const u=l===void 0?void 0:Math.min(l,n.cssRules.length);n==null||n.insertRule(a,u)}}catch{}}),(o=t.removes)===null||o===void 0||o.forEach(({index:a})=>{try{if(Array.isArray(a)){const{positions:l,index:u}=Te(a);Mt(n.cssRules,l).deleteRule(u||0)}else n==null||n.deleteRule(a)}catch{}}),t.replace)try{(s=n.replace)===null||s===void 0||s.call(n,t.replace)}catch{}if(t.replaceSync)try{(r=n.replaceSync)===null||r===void 0||r.call(n,t.replaceSync)}catch{}}applyStyleDeclaration(t,n){t.set&&Mt(n.rules,t.index).style.setProperty(t.set.property,t.set.value,t.set.priority),t.remove&&Mt(n.rules,t.index).style.removeProperty(t.remove.property)}applyAdoptedStyleSheet(t){var n;const i=this.mirror.getNode(t.id);if(!i)return;(n=t.styles)===null||n===void 0||n.forEach(r=>{var a;let l=null,u=null;if(Wt(i)?u=((a=i.ownerDocument)===null||a===void 0?void 0:a.defaultView)||null:i.nodeName==="#document"&&(u=i.defaultView),u)try{l=new u.CSSStyleSheet,this.styleMirror.add(l,r.styleId),this.applyStyleSheetRule({source:O.StyleSheetRule,adds:r.rules},l)}catch{}});let o=0;const s=(r,a)=>{const l=a.map(u=>this.styleMirror.getStyle(u)).filter(u=>u!==null);Wt(r)?r.shadowRoot.adoptedStyleSheets=l:r.nodeName==="#document"&&(r.adoptedStyleSheets=l),l.length!==a.length&&o<10&&(setTimeout(()=>s(r,a),0+100*o),o++)};s(i,t.styleIds)}legacy_resolveMissingNode(t,n,i,o){const{previousId:s,nextId:r}=o,a=s&&t[s],l=r&&t[r];if(a){const{node:u,mutation:c}=a;n.insertBefore(u,i),delete t[c.node.id],delete this.legacy_missingNodeRetryMap[c.node.id],(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(t,n,u,c)}if(l){const{node:u,mutation:c}=l;n.insertBefore(u,i.nextSibling),delete t[c.node.id],delete this.legacy_missingNodeRetryMap[c.node.id],(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(t,n,u,c)}}moveAndHover(t,n,i,o,s){const r=this.mirror.getNode(i);if(!r)return this.debugNodeNotFound(s,i);const a=hn(r,this.iframe),l=t*a.absoluteScale+a.x,u=n*a.absoluteScale+a.y;this.mouse.style.left=`${l}px`,this.mouse.style.top=`${u}px`,o||this.drawMouseTail({x:l,y:u}),this.hoverElements(r)}drawMouseTail(t){if(!this.mouseTail)return;const{lineCap:n,lineWidth:i,strokeStyle:o,duration:s}=this.config.mouseTail===!0?ie:Object.assign({},ie,this.config.mouseTail),r=()=>{if(!this.mouseTail)return;const a=this.mouseTail.getContext("2d");a&&this.tailPositions.length&&(a.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),a.beginPath(),a.lineWidth=i,a.lineCap=n,a.strokeStyle=o,a.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(l=>a.lineTo(l.x,l.y)),a.stroke())};this.tailPositions.push(t),r(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(a=>a!==t),r()},s/this.speedService.state.context.timer.speed)}hoverElements(t){var n;(n=this.iframe.contentDocument)===null||n===void 0||n.querySelectorAll(".\\:hover").forEach(o=>{o.classList.remove(":hover")});let i=t;for(;i;)i.classList&&i.classList.add(":hover"),i=i.parentElement}isUserInteraction(t){return t.type===K.IncrementalSnapshot&&t.data.source>O.Mutation&&t.data.source<=O.Input}backToNormal(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(G.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(t,n){this.warn(`Node with id '${n}' not found. `,t)}warnCanvasMutationFailed(t,n){this.warn("Has error on canvas update",n,"canvas mutation:",t)}debugNodeNotFound(t,n){this.debug("[replayer]",`Node with id '${n}' not found. `,t)}warn(...t){this.config.showWarning&&console.warn("[replayer]",...t)}debug(...t){this.config.showDebug&&console.log("[replayer]",...t)}}function $e(e){let t="";return Object.keys(e).forEach(n=>{t+=`${n}: ${e[n]};`}),t}function Tt(e,t=2){let n=String(e);const i=Math.pow(10,t-1);if(e<i)for(;String(i).length>n.length;)n=`0${e}`;return n}function Ut(e){if(e<=0)return"00:00";const t=Math.floor(e/36e5);e%=36e5;const n=Math.floor(e/6e4);e%=6e4;const i=Math.floor(e/1e3);return t?`${Tt(t)}:${Tt(n)}:${Tt(i)}`:`${Tt(n)}:${Tt(i)}`}function Ke(){let e=!1;return["fullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement"].forEach(t=>{t in document&&(e=e||!!document[t])}),e}function Ye(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]}function _i(e){return e.type===K.IncrementalSnapshot&&e.data.source>O.Mutation&&e.data.source<=O.Input}function Wi(e){let t,n,i,o,s,r,a,l,u;return{c(){t=j("div"),n=j("input"),i=et(),o=j("label"),s=et(),r=j("span"),a=vt(e[3]),T(n,"type","checkbox"),T(n,"id",e[2]),n.disabled=e[1],T(n,"class","svelte-9brlez"),T(o,"for",e[2]),T(o,"class","svelte-9brlez"),T(r,"class","label svelte-9brlez"),T(t,"class","switch svelte-9brlez"),wt(t,"disabled",e[1])},m(c,d){ht(c,t,d),B(t,n),n.checked=e[0],B(t,i),B(t,o),B(t,s),B(t,r),B(r,a),l||(u=xt(n,"change",e[4]),l=!0)},p(c,[d]){4&d&&T(n,"id",c[2]),2&d&&(n.disabled=c[1]),1&d&&(n.checked=c[0]),4&d&&T(o,"for",c[2]),8&d&&Pt(a,c[3]),2&d&&wt(t,"disabled",c[1])},i:Kt,o:Kt,d(c){c&&ct(t),l=!1,u()}}}function Gi(e,t,n){let{disabled:i}=t,{checked:o}=t,{id:s}=t,{label:r}=t;return e.$$set=a=>{"disabled"in a&&n(1,i=a.disabled),"checked"in a&&n(0,o=a.checked),"id"in a&&n(2,s=a.id),"label"in a&&n(3,r=a.label)},[o,i,s,r,function(){o=this.checked,n(0,o)}]}class Ui extends ge{constructor(t){super(),fe(this,t,Gi,Wi,de,{disabled:1,checked:0,id:2,label:3})}}function Pe(e,t,n){const i=e.slice();return i[39]=t[n],i}function Qe(e,t,n){const i=e.slice();return i[42]=t[n],i}function ze(e,t,n){const i=e.slice();return i[45]=t[n],i}function Je(e){let t,n,i,o,s,r,a,l,u,c,d,h,v,f,p,m,y,I,N,E,L,V,$,U,C,x,A=Ut(e[6])+"",g=Ut(e[8].totalTime)+"",D=e[14],S=[];for(let w=0;w<D.length;w+=1)S[w]=He(ze(e,D,w));let P=e[9],_=[];for(let w=0;w<P.length;w+=1)_[w]=Xe(Qe(e,P,w));function b(w,W){return w[7]==="playing"?$i:Zi}let F=b(e),R=F(e),Q=e[3],J=[];for(let w=0;w<Q.length;w+=1)J[w]=je(Pe(e,Q,w));function st(w){e[30](w)}let X={id:"skip",disabled:e[10]==="skipping",label:"skip inactive"};return e[0]!==void 0&&(X.checked=e[0]),E=new Ui({props:X}),ft.push(()=>function(w,W,Z){const at=w.$$.props[W];at!==void 0&&(w.$$.bound[at]=Z,Z(w.$$.ctx[at]))}(E,"checked",st)),{c(){t=j("div"),n=j("div"),i=j("span"),o=vt(A),s=et(),r=j("div"),a=j("div"),l=et();for(let w=0;w<S.length;w+=1)S[w].c();u=et();for(let w=0;w<_.length;w+=1)_[w].c();c=et(),d=j("div"),h=et(),v=j("span"),f=vt(g),p=et(),m=j("div"),y=j("button"),R.c(),I=et();for(let w=0;w<J.length;w+=1)J[w].c();N=et(),ln(E.$$.fragment),V=et(),$=j("button"),$.innerHTML=`<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M916 380c-26.4 0-48-21.6-48-48L868 223.2 613.6 477.6c-18.4
            18.4-48.8 18.4-68 0-18.4-18.4-18.4-48.8 0-68L800 156 692 156c-26.4
            0-48-21.6-48-48 0-26.4 21.6-48 48-48l224 0c26.4 0 48 21.6 48 48l0
            224C964 358.4 942.4 380 916 380zM231.2 860l108.8 0c26.4 0 48 21.6 48
            48s-21.6 48-48 48l-224 0c-26.4 0-48-21.6-48-48l0-224c0-26.4 21.6-48
            48-48 26.4 0 48 21.6 48 48L164 792l253.6-253.6c18.4-18.4 48.8-18.4
            68 0 18.4 18.4 18.4 48.8 0 68L231.2 860z" p-id="1286"></path></svg>`,T(i,"class","rr-timeline__time svelte-19ke1iv"),T(a,"class","rr-progress__step svelte-19ke1iv"),H(a,"width",e[13]),T(d,"class","rr-progress__handler svelte-19ke1iv"),H(d,"left",e[13]),T(r,"class","rr-progress svelte-19ke1iv"),wt(r,"disabled",e[10]==="skipping"),T(v,"class","rr-timeline__time svelte-19ke1iv"),T(n,"class","rr-timeline svelte-19ke1iv"),T(y,"class","svelte-19ke1iv"),T($,"class","svelte-19ke1iv"),T(m,"class","rr-controller__btns svelte-19ke1iv"),T(t,"class","rr-controller svelte-19ke1iv")},m(w,W){ht(w,t,W),B(t,n),B(n,i),B(i,o),B(n,s),B(n,r),B(r,a),e[27](a),B(r,l);for(let Z=0;Z<S.length;Z+=1)S[Z].m(r,null);B(r,u);for(let Z=0;Z<_.length;Z+=1)_[Z].m(r,null);B(r,c),B(r,d),e[28](r),B(n,h),B(n,v),B(v,f),B(t,p),B(t,m),B(m,y),R.m(y,null),B(m,I);for(let Z=0;Z<J.length;Z+=1)J[Z].m(m,null);B(m,N),he(E,m,null),B(m,V),B(m,$),U=!0,C||(x=[xt(r,"click",e[16]),xt(y,"click",e[4]),xt($,"click",e[31])],C=!0)},p(w,W){if((!U||64&W[0])&&A!==(A=Ut(w[6])+"")&&Pt(o,A),(!U||8192&W[0])&&H(a,"width",w[13]),16384&W[0]){let M;for(D=w[14],M=0;M<D.length;M+=1){const it=ze(w,D,M);S[M]?S[M].p(it,W):(S[M]=He(it),S[M].c(),S[M].m(r,u))}for(;M<S.length;M+=1)S[M].d(1);S.length=D.length}if(512&W[0]){let M;for(P=w[9],M=0;M<P.length;M+=1){const it=Qe(w,P,M);_[M]?_[M].p(it,W):(_[M]=Xe(it),_[M].c(),_[M].m(r,c))}for(;M<_.length;M+=1)_[M].d(1);_.length=P.length}if((!U||8192&W[0])&&H(d,"left",w[13]),1024&W[0]&&wt(r,"disabled",w[10]==="skipping"),(!U||256&W[0])&&g!==(g=Ut(w[8].totalTime)+"")&&Pt(f,g),F!==(F=b(w))&&(R.d(1),R=F(w),R&&(R.c(),R.m(y,null))),1066&W[0]){let M;for(Q=w[3],M=0;M<Q.length;M+=1){const it=Pe(w,Q,M);J[M]?J[M].p(it,W):(J[M]=je(it),J[M].c(),J[M].m(m,N))}for(;M<J.length;M+=1)J[M].d(1);J.length=Q.length}const Z={};var at;1024&W[0]&&(Z.disabled=w[10]==="skipping"),!L&&1&W[0]&&(L=!0,Z.checked=w[0],at=()=>L=!1,oe.push(at)),E.$set(Z)},i(w){U||(dt(E.$$.fragment,w),U=!0)},o(w){Nt(E.$$.fragment,w),U=!1},d(w){w&&ct(t),e[27](null),Ht(S,w),Ht(_,w),e[28](null),R.d(),Ht(J,w),pe(E),C=!1,Et(x)}}}function He(e){let t,n;return{c(){t=j("div"),T(t,"title",n=e[45].name),H(t,"width",e[45].width),H(t,"height","4px"),H(t,"position","absolute"),H(t,"background",e[45].background),H(t,"left",e[45].position)},m(i,o){ht(i,t,o)},p(i,o){16384&o[0]&&n!==(n=i[45].name)&&T(t,"title",n),16384&o[0]&&H(t,"width",i[45].width),16384&o[0]&&H(t,"background",i[45].background),16384&o[0]&&H(t,"left",i[45].position)},d(i){i&&ct(t)}}}function Xe(e){let t,n;return{c(){t=j("div"),T(t,"title",n=e[42].name),H(t,"width","10px"),H(t,"height","5px"),H(t,"position","absolute"),H(t,"top","2px"),H(t,"transform","translate(-50%, -50%)"),H(t,"background",e[42].background),H(t,"left",e[42].position)},m(i,o){ht(i,t,o)},p(i,o){512&o[0]&&n!==(n=i[42].name)&&T(t,"title",n),512&o[0]&&H(t,"background",i[42].background),512&o[0]&&H(t,"left",i[42].position)},d(i){i&&ct(t)}}}function Zi(e){let t,n;return{c(){t=Yt("svg"),n=Yt("path"),T(n,"d",`M170.65984 896l0-768 640 384zM644.66944
              512l-388.66944-233.32864 0 466.65728z`),T(t,"class","icon"),T(t,"viewBox","0 0 1024 1024"),T(t,"version","1.1"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),T(t,"width","16"),T(t,"height","16")},m(i,o){ht(i,t,o),B(t,n)},d(i){i&&ct(t)}}}function $i(e){let t,n;return{c(){t=Yt("svg"),n=Yt("path"),T(n,"d",`M682.65984 128q53.00224 0 90.50112 37.49888t37.49888 90.50112l0
              512q0 53.00224-37.49888 90.50112t-90.50112
              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224
              37.49888-90.50112t90.50112-37.49888zM341.34016 128q53.00224 0
              90.50112 37.49888t37.49888 90.50112l0 512q0 53.00224-37.49888
              90.50112t-90.50112
              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224
              37.49888-90.50112t90.50112-37.49888zM341.34016 213.34016q-17.67424
              0-30.16704 12.4928t-12.4928 30.16704l0 512q0 17.67424 12.4928
              30.16704t30.16704 12.4928 30.16704-12.4928
              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928zM682.65984
              213.34016q-17.67424 0-30.16704 12.4928t-12.4928 30.16704l0 512q0
              17.67424 12.4928 30.16704t30.16704 12.4928 30.16704-12.4928
              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928z`),T(t,"class","icon"),T(t,"viewBox","0 0 1024 1024"),T(t,"version","1.1"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),T(t,"width","16"),T(t,"height","16")},m(i,o){ht(i,t,o),B(t,n)},d(i){i&&ct(t)}}}function je(e){let t,n,i,o,s,r,a=e[39]+"";function l(){return e[29](e[39])}return{c(){t=j("button"),n=vt(a),i=vt("x"),t.disabled=o=e[10]==="skipping",T(t,"class","svelte-19ke1iv"),wt(t,"active",e[39]===e[1]&&e[10]!=="skipping")},m(u,c){ht(u,t,c),B(t,n),B(t,i),s||(r=xt(t,"click",l),s=!0)},p(u,c){e=u,8&c[0]&&a!==(a=e[39]+"")&&Pt(n,a),1024&c[0]&&o!==(o=e[10]==="skipping")&&(t.disabled=o),1034&c[0]&&wt(t,"active",e[39]===e[1]&&e[10]!=="skipping")},d(u){u&&ct(t),s=!1,r()}}}function Ki(e){let t,n,i=e[2]&&Je(e);return{c(){i&&i.c(),t=vt("")},m(o,s){i&&i.m(o,s),ht(o,t,s),n=!0},p(o,s){o[2]?i?(i.p(o,s),4&s[0]&&dt(i,1)):(i=Je(o),i.c(),dt(i,1),i.m(t.parentNode,t)):i&&(sn(),Nt(i,1,1,()=>{i=null}),an())},i(o){n||(dt(i),n=!0)},o(o){Nt(i),n=!1},d(o){i&&i.d(o),o&&ct(t)}}}function qe(e,t,n){return(100-(t-n)/(t-e)*100).toFixed(2)}function Yi(e,t,n){const i=Kn();let o,s,r,a,l,u,c,d,h,v,{replayer:f}=t,{showController:p}=t,{autoPlay:m}=t,{skipInactive:y}=t,{speedOption:I}=t,{speed:N=I.length?I[0]:1}=t,{tags:E={}}=t,{inactiveColor:L}=t,V=0,$=null,U=!1,C=null;const x=()=>{$&&(cancelAnimationFrame($),$=null)},A=()=>{o==="paused"&&(l?(f.play(),l=!1):f.play(V))},g=()=>{o==="playing"&&(f.pause(),U=!1)},D=(b,F)=>{n(6,V=b),U=!1,(typeof F=="boolean"?F:o==="playing")?f.play(b):f.pause(b)},S=(b,F,R=!1,Q)=>{C=R?{start:b,end:F}:null,n(6,V=b),U=F,u=Q,f.play(b)},P=b=>{let F=o==="playing";n(1,N=b),F&&f.pause(),f.setConfig({speed:N}),F&&f.play(V)};var _;return nn(()=>{n(7,o=f.service.state.value),n(10,s=f.speedService.state.value),f.on("state-change",b=>{const{player:F,speed:R}=b;if(F!=null&&F.value&&o!==F.value)switch(n(7,o=F.value),o){case"playing":x(),$=requestAnimationFrame(function Q(){n(6,V=f.getCurrentTime()),U&&V>=U&&(C?S(C.start,C.end,!0,void 0):(f.pause(),u&&(u(),u=null))),V<c.totalTime&&($=requestAnimationFrame(Q))});break;case"paused":x()}R!=null&&R.value&&s!==R.value&&n(10,s=R.value)}),f.on("finish",()=>{l=!0,u&&(u(),u=null)}),m&&f.play()}),_=()=>{y!==f.config.skipInactive&&f.setConfig({skipInactive:y})},Jt().$$.after_update.push(_),on(()=>{f.pause(),x()}),e.$$set=b=>{"replayer"in b&&n(17,f=b.replayer),"showController"in b&&n(2,p=b.showController),"autoPlay"in b&&n(18,m=b.autoPlay),"skipInactive"in b&&n(0,y=b.skipInactive),"speedOption"in b&&n(3,I=b.speedOption),"speed"in b&&n(1,N=b.speed),"tags"in b&&n(19,E=b.tags),"inactiveColor"in b&&n(20,L=b.inactiveColor)},e.$$.update=()=>{if(64&e.$$.dirty[0]&&i("ui-update-current-time",{payload:V}),128&e.$$.dirty[0]&&i("ui-update-player-state",{payload:o}),131072&e.$$.dirty[0]&&n(8,c=f.getMetaData()),320&e.$$.dirty[0]){const b=Math.min(1,V/c.totalTime);n(13,d=100*b+"%"),i("ui-update-progress",{payload:b})}655360&e.$$.dirty[0]&&n(9,h=(()=>{const{context:b}=f.service.state,F=b.events.length,R=b.events[0].timestamp,Q=b.events[F-1].timestamp,J=[];return b.events.forEach(st=>{if(st.type===K.Custom){const X={name:st.data.tag,background:E[st.data.tag]||"rgb(73, 80, 246)",position:`${qe(R,Q,st.timestamp)}%`};J.push(X)}}),J})()),1179648&e.$$.dirty[0]&&n(14,v=(()=>{try{const{context:b}=f.service.state,F=b.events.length,R=b.events[0].timestamp,Q=b.events[F-1].timestamp,J=function(X){const w=[];let W=X[0].timestamp;for(const Z of X)_i(Z)&&(Z.timestamp-W>1e4&&w.push([W,Z.timestamp]),W=Z.timestamp);return w}(b.events),st=(X,w,W,Z)=>((Z-W)/(w-X)*100).toFixed(2);return J.map(X=>({name:"inactive period",background:L,position:`${qe(R,Q,X[0])}%`,width:`${st(R,Q,X[0],X[1])}%`}))}catch{return[]}})())},[y,N,p,I,()=>{switch(o){case"playing":g();break;case"paused":A()}},P,V,o,c,h,s,r,a,d,v,i,b=>{if(s==="skipping")return;const F=r.getBoundingClientRect();let R=(b.clientX-F.left)/F.width;R<0?R=0:R>1&&(R=1);const Q=c.totalTime*R;l=!1,D(Q)},f,m,E,L,A,g,D,S,()=>{n(0,y=!y)},()=>Promise.resolve().then(()=>{n(8,c=f.getMetaData())}),function(b){ft[b?"unshift":"push"](()=>{a=b,n(12,a)})},function(b){ft[b?"unshift":"push"](()=>{r=b,n(11,r)})},b=>P(b),function(b){y=b,n(0,y)},()=>i("fullscreen")]}class Pi extends ge{constructor(t){super(),fe(this,t,Yi,Ki,de,{replayer:17,showController:2,autoPlay:18,skipInactive:0,speedOption:3,speed:1,tags:19,inactiveColor:20,toggle:4,play:21,pause:22,goto:23,playRange:24,setSpeed:5,toggleSkipInactive:25,triggerUpdateMeta:26},null,[-1,-1])}get toggle(){return this.$$.ctx[4]}get play(){return this.$$.ctx[21]}get pause(){return this.$$.ctx[22]}get goto(){return this.$$.ctx[23]}get playRange(){return this.$$.ctx[24]}get setSpeed(){return this.$$.ctx[5]}get toggleSkipInactive(){return this.$$.ctx[25]}get triggerUpdateMeta(){return this.$$.ctx[26]}}function tn(e){let t,n,i={replayer:e[7],showController:e[3],autoPlay:e[1],speedOption:e[2],skipInactive:e[0],tags:e[4],inactiveColor:e[5]};return t=new Pi({props:i}),e[32](t),t.$on("fullscreen",e[33]),{c(){ln(t.$$.fragment)},m(o,s){he(t,o,s),n=!0},p(o,s){const r={};128&s[0]&&(r.replayer=o[7]),8&s[0]&&(r.showController=o[3]),2&s[0]&&(r.autoPlay=o[1]),4&s[0]&&(r.speedOption=o[2]),1&s[0]&&(r.skipInactive=o[0]),16&s[0]&&(r.tags=o[4]),32&s[0]&&(r.inactiveColor=o[5]),t.$set(r)},i(o){n||(dt(t.$$.fragment,o),n=!0)},o(o){Nt(t.$$.fragment,o),n=!1},d(o){e[32](null),pe(t,o)}}}function Qi(e){let t,n,i,o,s=e[7]&&tn(e);return{c(){t=j("div"),n=j("div"),i=et(),s&&s.c(),T(n,"class","rr-player__frame"),T(n,"style",e[11]),T(t,"class","rr-player"),T(t,"style",e[12])},m(r,a){ht(r,t,a),B(t,n),e[31](n),B(t,i),s&&s.m(t,null),e[34](t),o=!0},p(r,a){(!o||2048&a[0])&&T(n,"style",r[11]),r[7]?s?(s.p(r,a),128&a[0]&&dt(s,1)):(s=tn(r),s.c(),dt(s,1),s.m(t,null)):s&&(sn(),Nt(s,1,1,()=>{s=null}),an()),(!o||4096&a[0])&&T(t,"style",r[12])},i(r){o||(dt(s),o=!0)},o(r){Nt(s),o=!1},d(r){r&&ct(t),e[31](null),s&&s.d(),e[34](null)}}}function zi(e,t,n){let i,{width:o=1024}=t,{height:s=576}=t,{maxScale:r=1}=t,{events:a=[]}=t,{skipInactive:l=!0}=t,{autoPlay:u=!0}=t,{speedOption:c=[1,2,4,8]}=t,{speed:d=1}=t,{showController:h=!0}=t,{tags:v={}}=t,{inactiveColor:f="#D4D4D4"}=t,p,m,y,I,N,E,L=o,V=s;const $=(C,x)=>{const A=[o/x.width,s/x.height];r&&A.push(r),C.style.transform=`scale(${Math.min(...A)})translate(-50%, -50%)`},U=()=>{var C;p&&(Ke()?document.exitFullscreen?document.exitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():(C=p).requestFullscreen?C.requestFullscreen():C.mozRequestFullScreen?C.mozRequestFullScreen():C.webkitRequestFullscreen?C.webkitRequestFullscreen():C.msRequestFullscreen&&C.msRequestFullscreen())};return nn(()=>{if(c!==void 0&&Ye(c)!=="array")throw new Error("speedOption must be array");if(c.forEach(x=>{if(Ye(x)!=="number")throw new Error("item of speedOption must be number")}),c.indexOf(d)<0)throw new Error(`speed must be one of speedOption,
        current config:
        {
          ...
          speed: ${d},
          speedOption: [${c.toString()}]
          ...
        }
        `);var C;n(7,i=new Vi(a,Object.assign({speed:d,root:m,unpackFn:Di},t))),i.on("resize",x=>{$(i.wrapper,x)}),C=()=>{Ke()?setTimeout(()=>{L=o,V=s,n(13,o=p.offsetWidth),n(14,s=p.offsetHeight-(h?80:0)),$(i.wrapper,{width:i.iframe.offsetWidth,height:i.iframe.offsetHeight})},0):(n(13,o=L),n(14,s=V),$(i.wrapper,{width:i.iframe.offsetWidth,height:i.iframe.offsetHeight}))},document.addEventListener("fullscreenchange",C),document.addEventListener("webkitfullscreenchange",C),document.addEventListener("mozfullscreenchange",C),document.addEventListener("MSFullscreenChange",C),y=()=>{document.removeEventListener("fullscreenchange",C),document.removeEventListener("webkitfullscreenchange",C),document.removeEventListener("mozfullscreenchange",C),document.removeEventListener("MSFullscreenChange",C)}}),on(()=>{y&&y()}),e.$$set=C=>{n(39,t=ve(ve({},t),Ae(C))),"width"in C&&n(13,o=C.width),"height"in C&&n(14,s=C.height),"maxScale"in C&&n(15,r=C.maxScale),"events"in C&&n(16,a=C.events),"skipInactive"in C&&n(0,l=C.skipInactive),"autoPlay"in C&&n(1,u=C.autoPlay),"speedOption"in C&&n(2,c=C.speedOption),"speed"in C&&n(17,d=C.speed),"showController"in C&&n(3,h=C.showController),"tags"in C&&n(4,v=C.tags),"inactiveColor"in C&&n(5,f=C.inactiveColor)},e.$$.update=()=>{24576&e.$$.dirty[0]&&n(11,N=$e({width:`${o}px`,height:`${s}px`})),24584&e.$$.dirty[0]&&n(12,E=$e({width:`${o}px`,height:`${s+(h?80:0)}px`}))},t=Ae(t),[l,u,c,h,v,f,U,i,p,m,I,N,E,o,s,r,a,d,()=>i.getMirror(),()=>{$(i.wrapper,{width:i.iframe.offsetWidth,height:i.iframe.offsetHeight})},(C,x)=>{switch(i.on(C,x),C){case"ui-update-current-time":case"ui-update-progress":case"ui-update-player-state":I.$on(C,({detail:A})=>x(A))}},C=>{i.addEvent(C),I.triggerUpdateMeta()},()=>i.getMetaData(),()=>i,()=>{I.toggle()},C=>{I.setSpeed(C)},()=>{I.toggleSkipInactive()},()=>{I.play()},()=>{I.pause()},(C,x)=>{I.goto(C,x)},(C,x,A=!1,g)=>{I.playRange(C,x,A,g)},function(C){ft[C?"unshift":"push"](()=>{m=C,n(9,m)})},function(C){ft[C?"unshift":"push"](()=>{I=C,n(10,I)})},()=>U(),function(C){ft[C?"unshift":"push"](()=>{p=C,n(8,p)})}]}class Ji extends ge{constructor(t){super(),fe(this,t,zi,Qi,de,{width:13,height:14,maxScale:15,events:16,skipInactive:0,autoPlay:1,speedOption:2,speed:17,showController:3,tags:4,inactiveColor:5,getMirror:18,triggerResize:19,toggleFullscreen:6,addEventListener:20,addEvent:21,getMetaData:22,getReplayer:23,toggle:24,setSpeed:25,toggleSkipInactive:26,play:27,pause:28,goto:29,playRange:30},null,[-1,-1])}get getMirror(){return this.$$.ctx[18]}get triggerResize(){return this.$$.ctx[19]}get toggleFullscreen(){return this.$$.ctx[6]}get addEventListener(){return this.$$.ctx[20]}get addEvent(){return this.$$.ctx[21]}get getMetaData(){return this.$$.ctx[22]}get getReplayer(){return this.$$.ctx[23]}get toggle(){return this.$$.ctx[24]}get setSpeed(){return this.$$.ctx[25]}get toggleSkipInactive(){return this.$$.ctx[26]}get play(){return this.$$.ctx[27]}get pause(){return this.$$.ctx[28]}get goto(){return this.$$.ctx[29]}get playRange(){return this.$$.ctx[30]}}class Hi extends Ji{constructor(t){super({target:t.target,props:t.data||t.props})}}const Xi={class:"play"},to=Ln({__name:"PlayScreen",setup(e){const n=Bn().getEvents(),i=()=>{n.length!==0&&new Hi({target:document.querySelector("#doPlay"),props:{events:n}})};return(o,s)=>{const r=Un("el-button");return Vn(),_n("div",Xi,[Wn(r,{type:"primary",onClick:i},{default:Gn(()=>s[0]||(s[0]=[Zn("å›žæ”¾")])),_:1}),s[1]||(s[1]=Ce("hr",null,null,-1)),s[2]||(s[2]=Ce("div",{id:"doPlay"},null,-1))])}}});export{to as default};
